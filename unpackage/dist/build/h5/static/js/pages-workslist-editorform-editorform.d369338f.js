(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-workslist-editorform-editorform"],{"091a":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"editor"},[a("catLabel",{attrs:{dataType:"text",inputType:"text",text:"作品名称",hasX:""},model:{value:e.workData.name,callback:function(t){e.$set(e.workData,"name",t)},expression:"workData.name"}}),a("catLabel",{attrs:{dataType:"text",inputType:"text",text:"作品别名"},model:{value:e.workData.nicknames,callback:function(t){e.$set(e.workData,"nicknames",t)},expression:"workData.nicknames"}}),a("catLabel",{attrs:{text:"功能用途",initIndex:e.worktype_initIndex,dataType:"selector",selectList:e.selector_worktype,hasX:""},on:{handSelect:function(t){t=e.$handleEvent(t),e.worktype_handSelect(t)}},model:{value:e.workData.edition,callback:function(t){e.$set(e.workData,"edition",t)},expression:"workData.edition"}}),a("v-uni-view",{staticClass:"crowdbox"},[a("v-uni-radio-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.radioChange(t)}}},[a("v-uni-view",{staticClass:"title requried"},[e._v("版本类型")]),e._l(e.editionItems,function(t,i){return a("v-uni-label",{key:t.value,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",[a("v-uni-radio",{attrs:{value:t.value,checked:i===e.editionItems_current}})],1),a("v-uni-view",[e._v(e._s(t.name))])],1)})],2)],1),a("v-uni-view",{staticClass:"imgbox"},[a("v-uni-view",{staticClass:"title requried"},[e._v("作品封面")]),a("robby-image-upload",{attrs:{"enable-del":e.enableDel,"enable-add":e.enableAdd,limit:e.limitNumber},on:{delete:function(t){t=e.$handleEvent(t),e.deleteImage(t)},add:function(t){t=e.$handleEvent(t),e.addImage(t)}},model:{value:e.imageData,callback:function(t){e.imageData=t},expression:"imageData"}})],1),a("catLabel",{attrs:{text:"作品简介",dataType:"textarea",textareaLength:"1024",hasX:""},model:{value:e.workData.intro,callback:function(t){e.$set(e.workData,"intro",t)},expression:"workData.intro"}}),a("v-uni-view",{staticClass:"crowdbox"},[a("v-uni-radio-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.radioChange3(t)}}},[a("v-uni-view",{staticClass:"title requried"},[e._v("作品资费")]),e._l(e.freeItems,function(t,i){return a("v-uni-label",{key:t.value,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",[a("v-uni-radio",{attrs:{value:t.value,checked:i===e.free_current}})],1),a("v-uni-view",[e._v(e._s(t.name))])],1)})],2)],1),a("v-uni-view",{staticClass:"labbox",on:{click:function(t){t=e.$handleEvent(t),e.goSelectlabel(t)}}},[a("catLabel",{attrs:{text:"作品标签",dataText:e.label,hasX:""}})],1),a("v-uni-view",{staticClass:"crowdbox"},[a("v-uni-radio-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.radioChange2(t)}}},[a("v-uni-view",{staticClass:"title requried"},[e._v("难易程度")]),e._l(e.degreeItems,function(t,i){return a("v-uni-label",{key:t.value,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",[a("v-uni-radio",{attrs:{value:t.value,checked:i===e.degree_current}})],1),a("v-uni-view",[e._v(e._s(t.name))])],1)})],2)],1),a("v-uni-view",{staticClass:"crowdbox"},[a("v-uni-checkbox-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.checkboxChange(t)}}},[a("v-uni-view",{staticClass:"title requried"},[e._v("适宜人群")]),e._l(e.checkboxItems,function(t){return a("v-uni-label",{key:t.name,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",[a("v-uni-checkbox",{attrs:{value:t.value,checked:t.checked}}),a("v-uni-view",[e._v(e._s(t.value))])],1)],1)})],2)],1),a("catLabel",{attrs:{dataType:"text",inputType:"text",text:"作者名称",hasX:""},model:{value:e.workData.userNickname,callback:function(t){e.$set(e.workData,"userNickname",t)},expression:"workData.userNickname"}}),a("catLabel",{attrs:{text:"创作者说",dataType:"textarea",textareaLength:"1024",hasX:""},model:{value:e.workData.preface,callback:function(t){e.$set(e.workData,"preface",t)},expression:"workData.preface"}}),a("uni-collapse",{on:{change:function(t){t=e.$handleEvent(t),e.change(t)}}},[a("uni-collapse-item",{attrs:{title:"其他"}},[a("uni-list",[a("v-uni-view",{staticClass:"crowdbox"},[a("v-uni-radio-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.radioChange4(t)}}},[a("v-uni-view",{staticClass:"title requried"},[e._v("启动选项")]),e._l(e.startItems,function(t,i){return a("v-uni-label",{key:t.value,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",[a("v-uni-radio",{attrs:{value:t.value,checked:i===e.start_current}})],1),a("v-uni-view",[e._v(e._s(t.name))])],1)})],2)],1),a("v-uni-view",{staticClass:"crowdbox"},[a("v-uni-checkbox-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.checkboxChange2(t)}}},[a("v-uni-view",{staticClass:"title"},[e._v("选项设置")]),e._l(e.settingworktype,function(t){return a("v-uni-label",{key:t.name,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",[a("v-uni-checkbox",{attrs:{value:t.name,checked:t.checked}}),a("v-uni-view",[e._v(e._s(t.value))])],1)],1)})],2)],1),a("catLabel",{attrs:{dataType:"text",inputType:"text",text:"表单网站"},model:{value:e.workData.postURL,callback:function(t){e.$set(e.workData,"postURL",t)},expression:"workData.postURL"}}),a("catLabel",{attrs:{dataType:"text",inputType:"text",text:"配置参数"},model:{value:e.workData.configContent,callback:function(t){e.$set(e.workData,"configContent",t)},expression:"workData.configContent"}}),a("v-uni-view",{staticClass:"crowdbox2"},[a("v-uni-view",{staticClass:"title"},[e._v("自动存档")]),a("v-uni-view",{staticClass:"switchbox"},[a("v-uni-switch",{attrs:{checked:e.hadOpen},on:{change:function(t){t=e.$handleEvent(t),e.switch1Change(t)}}})],1)],1)],1)],1)],1),a("v-uni-button",{staticClass:"margin-top",attrs:{type:"primary",plain:"true"},on:{click:function(t){t=e.$handleEvent(t),e.adddata(t)}}},[e._v("添加作品")])],1)},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},"152b":function(e,t,a){var i=a("d3f8");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("99ba229e",i,!0,{sourceMap:!1,shadowMode:!1})},"33ca":function(e,t,a){"use strict";var i=a("152b"),n=a.n(i);n.a},3859:function(e,t,a){"use strict";a.r(t);var i=a("091a"),n=a("b7c5");for(var o in n)"default"!==o&&function(e){a.d(t,e,function(){return n[e]})}(o);a("33ca");var r=a("2877"),s=Object(r["a"])(n["default"],i["a"],i["b"],!1,null,"0a25e8f8",null);t["default"]=s.exports},8424:function(e,t,a){"use strict";var i=a("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("b6d0")),o=i(a("774e"));a("28a5"),a("a481");var r=i(a("f499")),s=i(a("e814"));a("7f7f");var l=i(a("31ea")),c=i(a("0b8d")),u=i(a("42d6")),d=i(a("87e1")),v=i(a("e148")),f=i(a("5d5b")),h=i(a("8b9c")),k=a("f8e2"),w=(a("b410"),{components:{catLabel:l.default,uniCollapse:u.default,uniCollapseItem:d.default,uniList:v.default,uniListItem:f.default,robbyImageUpload:h.default},data:function(){return{userinfo:{},imageData:"",fileList:"",enableDel:!0,limitNumber:1,enableAdd:!0,img:"",bannerImgUrl:"",hadOpen:!0,worktype_initIndex:0,worktype:[],selector_worktype:[],degreeItems:[{value:"1",name:"简单"},{value:"2",name:"中等"},{value:"3",name:"困难"}],degree_current:0,editionItems:[{value:"1",name:"文字版"},{value:"2",name:"声音版"}],editionItems_current:0,freeItems:[{value:"1",name:"免费"},{value:"2",name:"付费"}],free_current:0,startItems:[{value:"1",name:"询问开始或继续"},{value:"2",name:"快速开始"},{value:"2",name:"继续"}],start_current:0,checkboxItems:[{name:"1",value:"儿童"},{name:"2",value:"学生"},{name:"3",value:"成人"}],settingworktype:[{name:"debug",value:"调试词性"},{name:"disable_time_recognition",value:"时间禁用多次识别"}],label:"",workData:{name:"",intro:"",userId:"",bannerImgUrl:"",preface:"",labels:[],difficulty:"简单",cache:!0,userNickname:"",suitCrowds:"",wordNum:"",postURL:"",configContent:"",postActive:!1,startOption:1,extraOptions:[],edition:1,workType:0,startAge:1,stopAge:100,free:0,nicknames:"",username:""}}},methods:{getworktype:function(){var e=this;e.$request.get(c.default.backUrl+"/workType").then(function(t){var a=[];for(var i in t.data){var n={label:"",value:"",index:"",level:""};n.label=t.data[i].name,n.value=t.data[i].id,n.index=(0,s.default)(i),n.level=t.data[i].level,a.push(n)}e.worktype=t.data,e.selector_worktype=a,console.log(e.selector_worktype,"下拉框数据")}).catch(function(e){console.error("error:",e)})},editionList_handSelect:function(e){console.log(e),this.editionList_initIndex=e.checkArr.index,console.log(this.editionList_initIndex,"索引"),0===this.editionList_initIndex?this.workData.edition=1:1===this.worktype_initIndex&&(this.workData.edition=2),console.log(this.workData.edition,"版本类型")},worktype_handSelect:function(e){console.log(e),this.worktype_initIndex=e.checkArr.index,this.workData.workType=this.selector_worktype[e.checkArr.index].value,this.isshow=this.selector_worktype[e.checkArr.index].value,console.log(this.workData.workType,"id")},radioChange2:function(e){for(var t=0;t<this.degreeItems.length;t++)if(this.degreeItems[t].value===e.target.value){this.degree_current=t;break}console.log(this.degree_current,"单选"),0===this.degree_current?this.workData.difficulty="简单":1===this.degree_current?this.workData.difficulty="中等":2===this.degree_current&&(this.workData.difficulty="困难")},radioChange:function(e){for(var t=0;t<this.editionItems.length;t++)if(this.editionItems[t].value===e.target.value){this.editionItems_current=t;break}console.log(this.editionItems_current,"单选"),0===this.editionItems_current?this.workData.edition=1:1===this.degree_initIndex&&(this.workData.edition=2)},radioChange3:function(e){for(var t=0;t<this.freeItems.length;t++)if(this.freeItems[t].value===e.target.value){this.free_current=t;break}0===this.free_current?this.workData.free=0:1===this.free_current&&(this.workData.free=1)},radioChange4:function(e){for(var t=0;t<this.startItems.length;t++)if(this.freeItems[t].value===e.target.value){this.start_current=t;break}0===this.start_current?this.workData.startOption=1:1===this.start_current?this.workData.startOption=2:2===this.start_current&&(this.workData.startOption=3)},checkboxChange:function(e){console.log(e);for(var t=e.target.value,a={},i=0;i<this.checkboxItems.length;i++)-1!==t.indexOf(this.checkboxItems[i].name)?a["checkboxItems["+i+"].checked"]=!0:a["checkboxItems["+i+"].checked"]=!1;this.workData.suitCrowds=e.target.value},checkboxChange2:function(e){console.log(e);for(var t=e.target.value,a={},i=0;i<this.settingworktype.length;i++)-1!==t.indexOf(this.settingworktype[i].name)?a["settingworktype["+i+"].checked"]=!0:a["settingworktype["+i+"].checked"]=!1;this.workData.extraOptions=t},goSelectlabel:function(){var e=(0,r.default)(this.workData.labels);uni.navigateTo({url:"../Selectlabel/Selectlabel?data="+e})},switch1Change:function(e){console.log("switch1 发生 change 事件，携带值为",e.target.value),this.workData.cache=e.target.value},addImage:function(e){var t=e.allImages[0],a=this;(0,k.pathToBase64)(t).then(function(e){var t=c.default.backUrl+"/upload/img",i={data:e};a.$request.post(t,i).then(function(e){1===e.code&&(a.workData.bannerImgUrl=e.data.absolutePath)}).catch(function(e){console.error("error:",e)})}).catch(function(e){console.error(e)})},adddata:function(){var e=JSON.parse((0,r.default)(this.workData));if(e.intro&&e.suitCrowds&&e.userNickname&&e.preface&&e.difficulty&&e.userNickname&&e.labels){e.suitCrowds.length>0&&(e.suitCrowds=e.suitCrowds.join(",")),e.nicknames?(e.nicknames=e.nicknames.replace(/,/g,"，"),e.nicknames=e.nicknames.replace(/ /g,""),e.nicknames=e.nicknames.split("，")):e.nicknames=[],e.nicknames=(0,o.default)(new n.default(e.nicknames)),console.log(e,"要发送的数据");var t=this;uni.showLoading({title:"生成作品中"}),t.$request.post(c.default.backUrl+"/work",e).then(function(e){uni.hideLoading(),1===e.code&&uni.showModal({title:"提示",content:"添加作品成功",cancelText:"继续添加",confirmText:"返回列表",success:function(e){e.confirm?uni.reLaunch({url:"/pages/workslist/workslist"}):e.cancel}}),console.log(e)}).catch(function(e){console.error("error:",error)})}else uni.showToast({title:"请填写必填项",icon:"none",duration:2e3})},change:function(){}},onShow:function(){this.getworktype()},onLoad:function(e){var t=uni.getStorageSync("userinfo");if(this.userinfo=t,this.workData.userNickname=t.nickname,this.workData.username=t.username,e.workdata)JSON.parse(e.workdata);else if(e.data){var a=JSON.parse(e.data),i="";for(var n in this.workData.labels=a,this.workData.labels)i=i+","+this.workData.labels[n].name;i=i.substr(1),this.label=i}}});t.default=w},b7c5:function(e,t,a){"use strict";a.r(t);var i=a("8424"),n=a.n(i);for(var o in i)"default"!==o&&function(e){a.d(t,e,function(){return i[e]})}(o);t["default"]=n.a},d3f8:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,'.crowdbox[data-v-0a25e8f8]{border-bottom:1px solid silver}.crowdbox .uni-list[data-v-0a25e8f8]{padding:%?30?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.crowdbox .uni-list-cell[data-v-0a25e8f8]{margin:%?10?%;text-align:center;font-size:%?28?%}.crowdbox .title[data-v-0a25e8f8]{font-size:%?28?%;margin-top:%?30?%;margin-right:%?30?%}.crowdbox2[data-v-0a25e8f8]{padding:%?30?%;border-bottom:1px solid silver;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;font-size:%?32?%;margin-top:%?30?%;margin-right:%?30?%}.switchbox[data-v-0a25e8f8]{margin-left:30px;-webkit-transform:scale(.7);-ms-transform:scale(.7);transform:scale(.7);margin-top:%?-20?%}.collapse-box[data-v-0a25e8f8]{margin-top:%?10?%;background:#fff!important}.uni-collapse-cell[data-v-0a25e8f8]{z-index:1!important}.uni-picker-view-content[data-v-0a25e8f8]{z-index:999!important}.collapse-box2[data-v-0a25e8f8]{\r\n\t/* margin-top: 10upx */background:#fff!important}.imgbox[data-v-0a25e8f8]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-left:%?30?%;padding-top:%?15?%;font-size:%?28?%;border-bottom:1px solid #d5d5d5}.imgbox .title[data-v-0a25e8f8]{margin-top:%?100?%;margin-right:%?30?%}.requried[data-v-0a25e8f8]:before{content:"*";color:#f56c6c;margin-right:2px}.labbox .text[data-v-0a25e8f8]:before{content:"*";color:#f56c6c;margin-right:2px}',""])}}]);