(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-workpage-goods-goods"],{"03af":function(t,e,o){e=t.exports=o("2350")(!1),e.push([t.i,".margin-top[data-v-53045785]{margin-top:%?20?%}.QS-segmented-control[data-v-53045785]{border-bottom:1px solid #e5e5e5}",""])},"0c38":function(t,e,o){"use strict";var n=o("a6ac"),i=o.n(n);i.a},"188c":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o("c5f6");var n=uni.getSystemInfoSync(),i=n.screenWidth,r={props:{tabs:{type:Array,default:function(){return[]}},current:{type:Number,default:0},height:{type:[String,Number],default:80},width:{type:[String,Number],default:250},fontSize:{type:[String,Number],default:30},duration:{type:[String,Number],default:.5},activeColor:{type:String,default:"#33cc33"},defaultColor:{type:String,default:"#888"},animationLineWidth:{type:[String,Number],default:20},line2Style:{type:String,default:"height: 8rpx;border-radius: 4rpx;"},animationMode:{type:String,default:"line1"},autoCenter:{type:Boolean,default:!0},autoCenterMode:{type:String,default:"component"},activeStyle:{type:String,default:"bottom:0;left:50%;transform: translate(-50%,-100%);height: 8rpx;border-radius:4rpx;"},defaultStyle:{type:String,default:"bottom:0;left:50%;transform: translate(-50%,-100%);height: 8rpx;border-radius:4rpx;"},backgroundColor:{type:String,default:"rgba(255,255,255,0)"},hasItemBackground:{type:Boolean,default:!1},itemBackgroundColor:{type:String,default:"rgba(255,255,255,0)"},itemBackgroundStyle:{type:String,default:""},zIndex:{type:[String,Number],default:99}},computed:{getCurrent:function(){return this.current>this.getTabs.length-1?this.getTabs.length-1:this.current},getTabs:function(){return this.tabs},getHeight:function(){return this.height},getWidth:function(){return this.width},getFontSize:function(){return this.fontSize},getDuration:function(){return this.duration},getBgColor:function(){var t=this.backgroundColor||"rgba(255,255,255,0)";return this.getTabs[this.getCurrent]instanceof Object&&this.getTabs[this.getCurrent].backgroundColor||t},getItemBackgroundColor:function(){var t=this.itemBackgroundColor||"rgba(255,255,255,0)";return this.getTabs[this.getCurrent]instanceof Object&&this.getTabs[this.getCurrent].itemBackgroundColor||t},getDurationStyle:function(){return"transition-duration: ".concat(this.getDuration,"s;")},getActiveColor:function(){var t;return t=this.getTabs[this.getCurrent]instanceof Object&&this.getTabs[this.getCurrent].activeColor?this.getTabs[this.getCurrent].activeColor:this.activeColor,t},getDefaultColor:function(){var t;return t=this.getTabs[this.getCurrent]instanceof Object&&this.getTabs[this.getCurrent].defaultColor?this.getTabs[this.getCurrent].defaultColor:this.defaultColor,t},getActiveStyle:function(){return"width:".concat(this.animationLineWidth,"%;background-color:").concat(this.getActiveColor,";").concat(this.activeStyle)},getDefaultStyle:function(){return"width:0;background-color:".concat(this.getActiveColor,";").concat(this.defaultStyle)},getLinezIndex:function(){return"z-index: ".concat(Number(this.zIndex)+2,";")},getBoxStyle2:function(){if("line2"===this.animationMode){var t=Number(this.line2Width),e=this.width*(t/100),o=this.width*(this.getCurrent+1)-this.width/2-e/2;return"transform:translate(".concat(o,"rpx, -100%);width:").concat(e,"rpx;background-color: ").concat(this.getActiveColor,";").concat(this.line2Style)}},getItemBackgroundBoxStyle:function(){return"height: ".concat(this.getHeight,"rpx;\n\t\t\t\t\twidth: ").concat(this.getWidth,"rpx;\n\t\t\t\t\tz-index: ").concat(Number(this.zIndex)+1,";\n\t\t\t\t\ttransition-duration: ").concat(this.getDuration,"s;\n\t\t\t\t\ttransform: translateX(").concat(this.width*this.getCurrent,"rpx);")},getItemBackgroundStyle:function(){return"transition-duration: ".concat(this.getDuration,"s;\n\t\t\t\t\tbackground-color: ").concat(this.getItemBackgroundColor,";\n\t\t\t\t\tbox-shadow: 0 0 5rpx 5rpx ").concat(this.getItemBackgroundColor,";\n\t\t\t\t\t").concat(this.itemBackgroundStyle,";")}},watch:{current:function(t,e){this.change(t)}},data:function(){return{left:0,line2Width:this.animationLineWidth,setTimeoutFc:null,componentsWidth:0}},mounted:function(){var t=this;this.getQuery(function(){t.countScrollX()})},methods:{emit:function(t){this.$emit("change",t)},change:function(){var t=this;this.countScrollX(),"line2"===this.animationMode&&(this.line2Width=2,this.setTimeoutFc&&clearTimeout(this.setTimeoutFc),this.setTimeoutFc=setTimeout(function(){t.line2Width=t.animationLineWidth},1e3*this.getDuration*3/5))},getQuery:function(t){var e=this;try{var o=uni.createSelectorQuery().in(this).select(".QS-segmented-control-scroll");o.fields({size:!0},function(o){o?(e.componentsWidth=o.width,t&&"function"===typeof t&&t(o)):e.retryGetQuery(t)}).exec()}catch(n){this.componentsWidth=i}},retryGetQuery:function(){var t=this;try{var e=uni.createSelectorQuery().select(".QS-segmented-control-scroll");e.fields({size:!0},function(e){t.componentsWidth=e?e.width:i,cb&&"function"===typeof cb&&cb(e)}).exec()}catch(o){this.componentsWidth=i}},countScrollX:function(){if(this.autoCenter){var t,e=Number(this.width),o=e/750*i,n=o*(this.getCurrent+1)-o/2;t="window"===this.autoCenterMode?i:this.componentsWidth,this.left=n-t/2}}}};e.default=r},"4dfb":function(t,e,o){var n=o("61bf");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=o("4f06").default;i("218412ee",n,!0,{sourceMap:!1,shadowMode:!1})},"4f81":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"QS-segmented-control",style:{"z-index":t.zIndex,"font-size":t.getFontSize+"rpx","background-color":t.getBgColor,"transition-duration":t.getDuration+"s"}},[o("v-uni-scroll-view",{staticClass:"QS-segmented-control-scroll",style:{"z-index":Number(t.zIndex)+1},attrs:{"scroll-x":"","scroll-left":t.left,"scroll-with-animation":""}},[t._l(t.getTabs,function(e,n){return o("v-uni-view",{key:n,staticClass:"QS-segmented-control-scroll-item ",style:{height:t.getHeight+"rpx","line-height":t.getHeight+"rpx",width:t.getWidth+"rpx",color:n===t.getCurrent?t.getActiveColor:t.getDefaultColor,"transition-duration":t.getDuration+"s","z-index":Number(t.zIndex)+2},on:{click:function(e){e=t.$handleEvent(e),t.emit(n)}}},["line1"===t.animationMode?o("v-uni-view",{staticClass:"boxStyle",style:t.getDurationStyle+(n===t.getCurrent?t.getActiveStyle:t.getDefaultStyle)}):t._e(),t._v(t._s(e.name||e))],1)}),t.hasItemBackground?o("v-uni-view",{staticClass:"itemBackgroundBox",style:t.getItemBackgroundBoxStyle},[o("v-uni-view",{staticClass:"itemBackground",style:t.getItemBackgroundStyle})],1):t._e(),"line2"===t.animationMode?o("v-uni-view",{staticClass:"boxStyle2",style:t.getLinezIndex+t.getDurationStyle+t.getBoxStyle2}):t._e()],2)],1)},i=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return i})},"61bf":function(t,e,o){e=t.exports=o("2350")(!1),e.push([t.i,"uni-scroll-view[data-v-2444be4e],uni-view[data-v-2444be4e]{-webkit-box-sizing:border-box;box-sizing:border-box}.QS-segmented-control[data-v-2444be4e]{width:100%;-webkit-transition-property:background-color,color;-o-transition-property:background-color,color;transition-property:background-color,color}.QS-segmented-control-scroll[data-v-2444be4e]{width:100%;white-space:nowrap;position:relative}.QS-segmented-control-scroll-item[data-v-2444be4e]{position:relative;display:inline-block;text-align:center;-webkit-transition-property:background-color,color;-o-transition-property:background-color,color;transition-property:background-color,color;padding:0 %?20?%}.content[data-v-2444be4e]{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis}.boxStyle[data-v-2444be4e]{pointer-events:none;position:absolute;-webkit-transition-property:all;-o-transition-property:all;transition-property:all}.boxStyle2[data-v-2444be4e]{pointer-events:none;position:absolute;bottom:0;left:0;-webkit-transition-property:all;-o-transition-property:all;transition-property:all}.itemBackgroundBox[data-v-2444be4e]{pointer-events:none;position:absolute;top:0;left:0;-webkit-transition-property:background-color,-webkit-transform;transition-property:background-color,-webkit-transform;-o-transition-property:transform,background-color;transition-property:transform,background-color;transition-property:transform,background-color,-webkit-transform;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.itemBackground[data-v-2444be4e]{height:100%;width:100%;-webkit-transition-property:all;-o-transition-property:all;transition-property:all}",""])},"79b3":function(t,e,o){"use strict";var n=o("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=n(o("f499")),r=n(o("9c6b")),a={components:{QSTabs:r.default},data:function(){return{tabs_1:["物品类别","所有物品"],current_1:0,pushdata:"pushdata",changedata:"changedata",empty:{},datalist:[],workinfo:{},goodslist:[]}},methods:{change:function(t,e){this["current_"+e]=t},getgoodslist:function(){var t=this;t.$request.get("/goods/instance_by_project_id/"+t.workinfo.id+"/").then(function(e){console.log(e,"请求的数据"),t.goodslist=e.data}).catch(function(t){console.error("error:",t)})},getdatalist:function(){var t=this;t.$request.get("/goods/class/?projectId="+t.workinfo.id).then(function(e){console.log(e,"请求的数据"),t.datalist=e.data}).catch(function(t){console.error("error:",t)})},deletedata_category:function(t){var e=this;uni.showModal({title:"提示",content:"确定删除此条数据吗",success:function(o){o.confirm?e.$request.delete("/goods/class/"+t.id+"/").then(function(t){e.getdatalist(),e.getgoodslist()}).catch(function(t){console.error("error:",t)}):o.cancel&&console.log("用户点击取消")}})},deletedata_goods:function(t){var e=this;uni.showModal({title:"提示",content:"确定删除此条数据吗",success:function(o){o.confirm?e.$request.delete("/goods/instance/"+t.id+"/").then(function(t){e.getdatalist(),e.getgoodslist()}).catch(function(t){console.error("error:",t)}):o.cancel&&console.log("用户点击取消")}})},goto_editor_category:function(t,e){if("pushdata"===e)uni.navigateTo({url:"./editorCategory/editorCategory"});else if("changedata"===e){console.log(t,"data");var o=(0,i.default)(t);uni.navigateTo({url:"./editorCategory/editorCategory?categoryinfo="+o})}},goto_editor_goods:function(t,e){if("pushdata"===e)uni.navigateTo({url:"./categoryGoods/categoryGoods"});else if("changedata"===e){console.log(t,"data");var o=(0,i.default)(t);uni.navigateTo({url:"./categoryGoods/categoryGoods?goodinfo="+o})}}},onShow:function(){var t=uni.getStorageSync("workinfo");this.workinfo=t,this.getdatalist(),this.getgoodslist()},mounted:function(){}};e.default=a},"8b09":function(t,e,o){"use strict";var n=o("4dfb"),i=o.n(n);i.a},"9c6b":function(t,e,o){"use strict";o.r(e);var n=o("4f81"),i=o("dbbd");for(var r in i)"default"!==r&&function(t){o.d(e,t,function(){return i[t]})}(r);o("8b09");var a=o("2877"),c=Object(a["a"])(i["default"],n["a"],n["b"],!1,null,"2444be4e",null);e["default"]=c.exports},a6ac:function(t,e,o){var n=o("03af");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=o("4f06").default;i("1fb0fbb6",n,!0,{sourceMap:!1,shadowMode:!1})},b1ec:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",[o("v-uni-view",{staticClass:"box"},[o("QSTabs",{attrs:{current:t.current_1,tabs:t.tabs_1,width:"375",Number:"100",backgroundColor:"#fff"},on:{change:function(e){e=t.$handleEvent(e),t.change(e,"1")}}})],1),o("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0===t.current_1,expression:"current_1 === 0"}]},[o("v-uni-button",{staticClass:"margin-top",attrs:{type:"primary",plain:"true"},on:{click:function(e){e=t.$handleEvent(e),t.goto_editor_category(t.empty,t.pushdata)}}},[t._v("添加物品类别")]),o("v-uni-view",{staticClass:"margin-top"},[o("t-table",[o("t-tr",[o("t-th",[t._v("物品类别")]),o("t-th",[t._v("操作")])],1),t._l(t.datalist,function(e,n){return o("t-tr",{key:n},[o("t-td",[t._v(t._s(e.name))]),o("t-td",{staticClass:"operation_box"},[o("fa-icon",{attrs:{type:"wrench operation_icon",size:"20",color:"#666"},on:{click:function(o){o=t.$handleEvent(o),t.goto_editor_category(e,t.changedata)}}}),o("fa-icon",{attrs:{type:"trash-o operation_icon",size:"20",color:"#666"},on:{click:function(o){o=t.$handleEvent(o),t.deletedata_category(e)}}})],1)],1)})],2)],1)],1),o("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:0!==t.current_1,expression:"current_1 !== 0"}]},[o("v-uni-button",{staticClass:"margin-top",attrs:{type:"primary",plain:"true"},on:{click:function(e){e=t.$handleEvent(e),t.goto_editor_goods(t.empty,t.pushdata)}}},[t._v("添加物品")]),o("v-uni-view",{staticClass:"margin-top"},[o("t-table",[o("t-tr",[o("t-th",[t._v("物品名称")]),o("t-th",[t._v("操作")])],1),t._l(t.goodslist,function(e,n){return o("t-tr",{key:n},[o("t-td",[t._v(t._s(e.name))]),o("t-td",{staticClass:"operation_box"},[o("fa-icon",{attrs:{type:"wrench operation_icon",size:"20",color:"#666"},on:{click:function(o){o=t.$handleEvent(o),t.goto_editor_goods(e,t.changedata)}}}),o("fa-icon",{attrs:{type:"trash-o operation_icon",size:"20",color:"#666"},on:{click:function(o){o=t.$handleEvent(o),t.deletedata_goods(e)}}})],1)],1)})],2)],1)],1)],1)},i=[];o.d(e,"a",function(){return n}),o.d(e,"b",function(){return i})},c88d:function(t,e,o){"use strict";o.r(e);var n=o("79b3"),i=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e["default"]=i.a},dbbd:function(t,e,o){"use strict";o.r(e);var n=o("188c"),i=o.n(n);for(var r in n)"default"!==r&&function(t){o.d(e,t,function(){return n[t]})}(r);e["default"]=i.a},eb07:function(t,e,o){"use strict";o.r(e);var n=o("b1ec"),i=o("c88d");for(var r in i)"default"!==r&&function(t){o.d(e,t,function(){return i[t]})}(r);o("0c38");var a=o("2877"),c=Object(a["a"])(i["default"],n["a"],n["b"],!1,null,"53045785",null);e["default"]=c.exports}}]);