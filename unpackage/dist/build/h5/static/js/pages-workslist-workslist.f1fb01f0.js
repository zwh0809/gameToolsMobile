(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-workslist-workslist"],{"0d2a":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"UniTag",props:{type:{type:String,default:"default"},size:{type:String,default:"normal"},text:{type:String,default:""},disabled:{type:[String,Boolean],defalut:!1},inverted:{type:[String,Boolean],defalut:!1},circle:{type:[String,Boolean],defalut:!1},mark:{type:[String,Boolean],defalut:!1}},methods:{onClick:function(){!0!==this.disabled&&"true"!==this.disabled&&this.$emit("click")}}};t.default=a},"0d55":function(e,t,i){"use strict";i.r(t);var a=i("cb8a"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=n.a},1085:function(e,t,i){"use strict";i.r(t);var a=i("e286"),n=i("434a");for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);i("f00e");var r=i("2877"),l=Object(r["a"])(n["default"],a["a"],a["b"],!1,null,"2d0b4a45",null);t["default"]=l.exports},"2f84":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,".uni-tag[data-v-49a658e3]{-webkit-box-sizing:border-box;box-sizing:border-box;padding:0 %?32?%;height:%?60?%;line-height:calc(%?60?% - 2px);font-size:%?28?%;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;color:#333;border-radius:%?6?%;background-color:#f8f8f8;border:1px solid #f8f8f8}.uni-tag--circle[data-v-49a658e3]{border-radius:%?30?%}.uni-tag--mark[data-v-49a658e3]{border-radius:0 %?30?% %?30?% 0}.uni-tag--disabled[data-v-49a658e3]{opacity:.5}.uni-tag--small[data-v-49a658e3]{height:%?40?%;padding:0 %?16?%;line-height:calc(%?40?% - 2px);font-size:%?24?%}.uni-tag--primary[data-v-49a658e3]{color:#fff;background-color:#007aff;border:1px solid #007aff}.uni-tag--primary.uni-tag--inverted[data-v-49a658e3]{color:#007aff;background-color:#fff;border:1px solid #007aff}.uni-tag--success[data-v-49a658e3]{color:#fff;background-color:#4cd964;border:1px solid #4cd964}.uni-tag--success.uni-tag--inverted[data-v-49a658e3]{color:#4cd964;background-color:#fff;border:1px solid #4cd964}.uni-tag--warning[data-v-49a658e3]{color:#fff;background-color:#f0ad4e;border:1px solid #f0ad4e}.uni-tag--warning.uni-tag--inverted[data-v-49a658e3]{color:#f0ad4e;background-color:#fff;border:1px solid #f0ad4e}.uni-tag--error[data-v-49a658e3]{color:#fff;background-color:#dd524d;border:1px solid #dd524d}.uni-tag--error.uni-tag--inverted[data-v-49a658e3]{color:#dd524d;background-color:#fff;border:1px solid #dd524d}.uni-tag--inverted[data-v-49a658e3]{color:#333;background-color:#fff;border:1px solid #f8f8f8}",""])},"434a":function(e,t,i){"use strict";i.r(t);var a=i("cd70"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=n.a},4360:function(e,t,i){"use strict";i.r(t);var a=i("872b"),n=i("0d55");for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);i("ffb3");var r=i("2877"),l=Object(r["a"])(n["default"],a["a"],a["b"],!1,null,"0c8c3324",null);t["default"]=l.exports},4597:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.neil-modal[data-v-0c8c3324]{position:fixed;visibility:hidden;width:100%;height:100%;top:0;left:0;z-index:1000;-webkit-transition:visibility .2s ease-in;-o-transition:visibility .2s ease-in;transition:visibility .2s ease-in}.neil-modal.neil-modal--show[data-v-0c8c3324]{visibility:visible}.neil-modal__header[data-v-0c8c3324]{position:relative;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;padding:%?18?% %?24?%;line-height:1.5;color:#333;font-size:%?32?%;text-align:center}.neil-modal__header[data-v-0c8c3324]:after{content:" ";position:absolute;left:0;bottom:0;right:0;height:1px;border-top:1px solid #e5e5e5;-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5)}.neil-modal__container[data-v-0c8c3324]{position:absolute;z-index:999;top:%?20?%;left:0;margin-left:1%;-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;-o-transition:transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;width:98%;border-radius:%?10?%;background-color:#fff;overflow-y:auto;opacity:0;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}.neil-modal__content[data-v-0c8c3324]{position:relative;color:#333;font-size:%?28?%;-webkit-box-sizing:border-box;box-sizing:border-box;line-height:1.5}.neil-modal__content[data-v-0c8c3324]:after{content:" ";position:absolute;left:0;bottom:-1px;right:0;height:1px;border-bottom:1px solid #e5e5e5;-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleY(.5);-ms-transform:scaleY(.5);transform:scaleY(.5)}.neil-modal__footer[data-v-0c8c3324]{position:relative;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;color:#333;font-size:%?32?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.neil-modal__footer-left[data-v-0c8c3324],.neil-modal__footer-right[data-v-0c8c3324]{position:relative;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;height:%?88?%;font-size:%?28?%;line-height:%?88?%;text-align:center;background-color:#fff;color:#333}.neil-modal__footer-right[data-v-0c8c3324]{color:#007aff}.neil-modal__footer-left[data-v-0c8c3324]:after{content:" ";position:absolute;right:-1px;top:0;width:1px;bottom:0;border-right:1px solid #e5e5e5;-webkit-transform-origin:0 0;-ms-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scaleX(.5);-ms-transform:scaleX(.5);transform:scaleX(.5)}.neil-modal__footer-hover[data-v-0c8c3324]{background-color:#f1f1f1}.neil-modal__mask[data-v-0c8c3324]{display:block;position:absolute;z-index:998;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);opacity:0;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}.neil-modal__mask.neil-modal--show[data-v-0c8c3324]{opacity:1}.neil-modal--padding[data-v-0c8c3324]{padding:%?32?% %?24?%;min-height:%?90?%}.neil-modal--show .neil-modal__container[data-v-0c8c3324],.neil-modal--show .neil-modal__mask[data-v-0c8c3324]{opacity:1}',""])},"48ec":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.text?i("v-uni-view",{staticClass:"uni-tag",class:[!0===e.disabled||"true"===e.disabled?"uni-tag--disabled":"",!0===e.inverted||"true"===e.inverted?"uni-tag--inverted":"",!0===e.circle||"true"===e.circle?"uni-tag--circle":"",!0===e.mark||"true"===e.mark?"uni-tag--mark":"","uni-tag--"+e.size,"uni-tag--"+e.type],on:{click:function(t){t=e.$handleEvent(t),e.onClick()}}},[e._v(e._s(e.text))]):e._e()},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},5063:function(e,t,i){var a=i("d1a6");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("db8b079c",a,!0,{sourceMap:!1,shadowMode:!1})},"6a01":function(e,t,i){var a=i("2f84");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("ad1e6fd4",a,!0,{sourceMap:!1,shadowMode:!1})},"872b":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"neil-modal",class:{"neil-modal--show":e.isOpen},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),t=e.$handleEvent(t),e.bindTouchmove(t)}}},[i("v-uni-view",{staticClass:"neil-modal__mask",on:{click:function(t){t=e.$handleEvent(t),e.clickMask(t)}}}),i("v-uni-view",{staticClass:"neil-modal__container"},[e.title.length>0?i("v-uni-view",{staticClass:"neil-modal__header"},[e._v(e._s(e.title))]):e._e(),i("v-uni-view",{staticClass:"neil-modal__content",class:e.content?"neil-modal--padding":"",style:{textAlign:e.align}},[e.content?[i("v-uni-text",{staticClass:"modal-content"},[e._v(e._s(e.content))])]:[e._t("default")]],2),i("v-uni-view",{staticClass:"neil-modal__footer"},[e.showCancel?i("v-uni-view",{staticClass:"neil-modal__footer-left",style:{color:e.cancelColor},attrs:{"hover-class":"neil-modal__footer-hover","hover-start-time":20,"hover-stay-time":70},on:{click:function(t){t=e.$handleEvent(t),e.clickLeft(t)}}},[e._v(e._s(e.cancelText))]):e._e(),i("v-uni-view",{staticClass:"neil-modal__footer-right",style:{color:e.confirmColor},attrs:{"hover-class":"neil-modal__footer-hover","hover-start-time":20,"hover-stay-time":70},on:{click:function(t){t=e.$handleEvent(t),e.clickRight(t)}}},[e._v(e._s(e.confirmText))])],1)],1)],1)},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},"8ff8":function(e,t,i){"use strict";var a=i("6a01"),n=i.n(a);n.a},b1e4:function(e,t,i){"use strict";i.r(t);var a=i("0d2a"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=n.a},be2d:function(e,t,i){var a=i("4597");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("3f099f2a",a,!0,{sourceMap:!1,shadowMode:!1})},cb8a:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={name:"neil-modal",props:{title:{type:String,default:""},content:String,align:{type:String,default:"left"},cancelText:{type:String,default:"取消"},cancelColor:{type:String,default:"#333333"},confirmText:{type:String,default:"确定"},confirmColor:{type:String,default:"#007aff"},showCancel:{type:[Boolean,String],default:!0},show:{type:[Boolean,String],default:!1},autoClose:{type:[Boolean,String],default:!0}},data:function(){return{isOpen:!1}},watch:{show:function(e){this.isOpen=e}},created:function(){this.isOpen=this.show},methods:{bindTouchmove:function(){},clickLeft:function(){var e=this;setTimeout(function(){e.$emit("cancel")},200),this.closeModal()},clickRight:function(){var e=this;setTimeout(function(){e.$emit("confirm")},200),this.closeModal()},clickMask:function(){this.autoClose&&this.closeModal()},closeModal:function(){this.showAnimation=!1,this.isOpen=!1,this.$emit("close")}}};t.default=a},cd70:function(e,t,i){"use strict";var a=i("288e");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i("b6d0")),o=a(i("774e"));i("a481"),i("6b54"),i("87b3"),i("28a5");var r=a(i("e814"));i("7f7f");var l=a(i("5d73")),s=a(i("f499")),c=a(i("0b8d")),d=a(i("31ea")),u=a(i("42d6")),f=a(i("87e1")),h=a(i("e148")),v=a(i("5d5b")),b=a(i("8b9c")),p=i("f8e2"),w=a(i("4360")),m=a(i("ddb0")),g=(i("b410"),{components:{catLabel:d.default,uniCollapse:u.default,uniCollapseItem:f.default,uniList:h.default,uniListItem:v.default,robbyImageUpload:b.default,neilModal:w.default,uniTag:m.default},data:function(){return{item_NO:{},operation_editor:"编辑作品",operation_add:"新建作品",is_typeshow:!1,datalist:[],LabelList:[],userinfo:{},imageData:[],fileList:"",enableDel:!0,limitNumber:1,enableAdd:!0,img:"",bannerImgUrl:"",hadOpen:!0,worktype_initIndex:0,worktype:[],selector_worktype:[],degreeItems:[{value:"1",name:"简单"},{value:"2",name:"中等"},{value:"3",name:"困难"}],degree_current:0,editionItems:[{value:"1",name:"文字版"},{value:"2",name:"声音版"}],editionItems_current:0,freeItems:[{value:"1",name:"免费"},{value:"2",name:"付费"}],free_current:0,startItems:[{value:"1",name:"询问开始或继续"},{value:"2",name:"快速开始"},{value:"3",name:"继续"}],start_current:0,checkboxItems:[{name:"1",value:"儿童"},{name:"2",value:"学生"},{name:"3",value:"成人"}],settingworktype:[{name:"debug",value:"调试词性"},{name:"disable_time_recognition",value:"时间禁用多次识别"}],label:"",workData:{name:"",intro:"",userId:"",bannerImgUrl:"",preface:"",labels:[],difficulty:"简单",cache:!0,userNickname:"",suitCrowds:"",wordNum:"",postURL:"",configContent:"",postActive:!1,startOption:1,extraOptions:[],edition:1,workType:0,startAge:1,stopAge:100,free:0,nicknames:"",username:""},labels:[],manual_labels:"",selected:[],show_labelBOx:!1,editortitle:""}},methods:{gotoinfo:function(e){uni.setStorageSync("workinfo",e),uni.navigateTo({url:"../grid/grid"})},getworktype:function(){var e=this;e.$request.get(c.default.backUrl+"/workType").then(function(e){console.log(e)}).catch(function(e){console.error("error:",e)})},getworklist:function(){var e=this;e.$request.get(c.default.backUrl+"/project/by_username/?username="+this.userinfo.username).then(function(t){console.log(t),1===t.code&&(e.datalist=t.data)}).catch(function(e){console.error("error:",e)})},dec_publish:function(e){console.log("点击操作了");var t=this,i=JSON.parse((0,s.default)(e));console.log(i,"数据"),2===i.applyStatus?uni.showModal({title:"发布作品",content:"作品需一到三天审核完毕，请耐心等待",success:function(e){e.confirm||e.cancel&&console.log("用户点击取消")}}):(i.applyStatus=2,uni.showModal({title:"发布作品",content:"作品需一到三天审核完毕，请耐心等待",success:function(e){e.confirm?t.$request.put("/project/"+i.id+"/apply?applyStatus=2").then(function(e){1===e.code&&god.getworklist()}).catch(function(e){console.error("error:",e)}):e.cancel&&console.log("用户点击取消")}}))},dec_delete:function(e){var t=this,i="/work/"+e.botAccount+"?botId="+e.botId;uni.showModal({title:"提示",content:"确定要删除此作品吗?",success:function(e){e.confirm?t.$request.delete(i).then(function(e){1===e.code&&t.getworklist()}).catch(function(e){console.error("error:",e)}):e.cancel&&console.log("用户点击取消")}})},editor:function(e,t){if("新建作品"===t){this.editortitle="添加作品",console.log(this.editortitle,"此时的状态"),this.workData={name:"",intro:"",userId:"",bannerImgUrl:"",preface:"",labels:[],difficulty:"简单",cache:!0,userNickname:"",suitCrowds:"",wordNum:"",postURL:"",configContent:"",postActive:!1,startOption:1,extraOptions:[],edition:1,workType:0,startAge:1,stopAge:100,free:0,nicknames:"",username:""},this.workData.userNickname=this.userinfo.nickname,this.workData.username=this.userinfo.username,this.label="",this.imageData=[],this.tart_current=0,this.ditionItems_current=0,this.free_current=0,this.degree_current=0,this.selected=[];var i=!0,a=!1,n=void 0;try{for(var o,c=(0,l.default)(this.settingworktype);!(i=(o=c.next()).done);i=!0){var d=o.value;d["checked"]=!1}}catch(T){a=!0,n=T}finally{try{i||null==c.return||c.return()}finally{if(a)throw n}}var u=!0,f=!1,h=void 0;try{for(var v,b=(0,l.default)(this.checkboxItems);!(u=(v=b.next()).done);u=!0){d=v.value;d["checked"]=!1}}catch(T){f=!0,h=T}finally{try{u||null==b.return||b.return()}finally{if(f)throw h}}}else if("编辑作品"===t){this.editortitle="确认编辑",console.log(this.editortitle,"此时的状态");var p=JSON.parse((0,s.default)(e));null===p.username&&(console.log(this.userinfo,"缓存数据"),p.username=this.userinfo.username);var w="";for(var d in p.labels)w=w+","+p.labels[d].name;w=w.substr(1),console.log(this.label,"已经选择的标签"),this.label=w,this.selected=p.labels,p.bannerImgUrl&&(this.imageData=[],this.imageData.push(p.bannerImgUrl)),this.workData=p;var m=p.workType;for(var g in this.selector_worktype)this.selector_worktype[g].value===m&&(this.worktype_initIndex=g);var k=p.edition;for(var g in this.editionItems)(0,r.default)(this.editionItems[g].value)===k&&(this.editionItems_current=(0,r.default)(g));var x=p.free;0===x?this.free_current=0:1===x&&(this.free_current=1);var _=p.difficulty;for(var y in"简单"===_?this.degree_current=0:"中等"===_?this.degree_current=1:"困难"===_&&(this.degree_current=2),this.checkboxItems)this.checkboxItems[y]["checked"]=!1;var C=p.suitCrowds,I=C.split(",");for(var d in this.checkboxItems)for(var D in I)I[D]===this.checkboxItems[d].value&&(this.checkboxItems[d]["checked"]=!0,console.log(this.checkboxItems[d].value));var $=p.startOption;for(var d in console.log($,"启动设置"),console.log(this.startItems,"列表"),this.startItems)(0,r.default)(this.startItems[d].value)===$&&(this.start_current=(0,r.default)(d))}console.log(e,"作品数据"),console.log(t,""),this.is_typeshow=!0},getLabelList:function(){var e=this;e.$request.get("/label/system").then(function(t){1===t.code&&(e.LabelList=t.data)}).catch(function(e){console.error("error:",error)})},editor_getworktype:function(){var e=this;e.$request.get(c.default.backUrl+"/workType").then(function(t){var i=[];for(var a in t.data){var n={label:"",value:"",index:"",level:""};n.label=t.data[a].name,n.value=t.data[a].id,n.index=(0,r.default)(a),n.level=t.data[a].level,i.push(n)}e.worktype=t.data,e.selector_worktype=i,console.log(e.selector_worktype,"下拉框数据")}).catch(function(e){console.error("error:",e)})},editionList_handSelect:function(e){console.log(e),this.editionList_initIndex=e.checkArr.index,console.log(this.editionList_initIndex,"索引"),0===this.editionList_initIndex?this.workData.edition=1:1===this.worktype_initIndex&&(this.workData.edition=2),console.log(this.workData.edition,"版本类型")},worktype_handSelect:function(e){console.log(e),this.worktype_initIndex=e.checkArr.index,this.workData.workType=this.selector_worktype[e.checkArr.index].value,this.isshow=this.selector_worktype[e.checkArr.index].value,console.log(this.workData.workType,"id")},radioChange2:function(e){for(var t=0;t<this.degreeItems.length;t++)if(this.degreeItems[t].value===e.target.value){this.degree_current=t;break}console.log(this.degree_current,"单选"),0===this.degree_current?this.workData.difficulty="简单":1===this.degree_current?this.workData.difficulty="中等":2===this.degree_current&&(this.workData.difficulty="困难")},radioChange:function(e){for(var t=0;t<this.editionItems.length;t++)if(this.editionItems[t].value===e.target.value){this.editionItems_current=t;break}console.log(this.editionItems_current,"单选"),0===this.editionItems_current?this.workData.edition=1:1===this.degree_initIndex&&(this.workData.edition=2)},radioChange3:function(e){for(var t=0;t<this.freeItems.length;t++)if(this.freeItems[t].value===e.target.value){this.free_current=t;break}0===this.free_current?this.workData.free=0:1===this.free_current&&(this.workData.free=1)},radioChange4:function(e){for(var t=0;t<this.startItems.length;t++)if(this.freeItems[t].value===e.target.value){this.start_current=t;break}0===this.start_current?this.workData.startOption=1:1===this.start_current?this.workData.startOption=2:2===this.start_current&&(this.workData.startOption=3)},checkboxChange:function(e){console.log(e);for(var t=e.target.value,i={},a=0;a<this.checkboxItems.length;a++)-1!==t.indexOf(this.checkboxItems[a].name)?i["checkboxItems["+a+"].checked"]=!0:i["checkboxItems["+a+"].checked"]=!1;this.workData.suitCrowds=e.target.value},checkboxChange2:function(e){console.log(e);for(var t=e.target.value,i={},a=0;a<this.settingworktype.length;a++)-1!==t.indexOf(this.settingworktype[a].name)?i["settingworktype["+a+"].checked"]=!0:i["settingworktype["+a+"].checked"]=!1;this.workData.extraOptions=t},switch1Change:function(e){this.workData.cache=e.target.value},goSelectlabel:function(){this.show_labelBOx=!0;var e=this.LabelList,t=!0,i=!1,a=void 0;try{for(var n,o=(0,l.default)(e);!(t=(n=o.next()).done);t=!0){var r=n.value,s=!0,c=!1,d=void 0;try{for(var u,f=(0,l.default)(r.labels);!(s=(u=f.next()).done);s=!0){var h=u.value;null!==h.id&&(h.id=h.id.toString()),h["checked"]=!1}}catch(w){c=!0,d=w}finally{try{s||null==f.return||f.return()}finally{if(c)throw d}}}}catch(w){i=!0,a=w}finally{try{t||null==o.return||o.return()}finally{if(i)throw a}}for(var v in this.labels=e,this.labels)for(var b in this.labels[v].labels)for(var p in this.selected)this.labels[v].labels[b].name===this.selected[p].name&&(this.labels[v].labels[b]["checked"]=!0,console.log(this.labels[v].labels[b].name));this.labels=e,console.log(this.selected,"已选择的标签")},addImage:function(e){var t=e.allImages[0],i=this;(0,p.pathToBase64)(t).then(function(e){var t=c.default.backUrl+"/upload/img",a={data:e};i.$request.post(t,a).then(function(e){1===e.code&&(i.workData.bannerImgUrl=e.data.absolutePath)}).catch(function(e){console.error("error:",e)})}).catch(function(e){console.error(e)})},editor_adddata:function(){var e=JSON.parse((0,s.default)(this.workData));if("添加作品"===this.editortitle&&(e.labels=this.selected),e.intro&&e.suitCrowds&&e.userNickname&&e.preface&&e.difficulty&&e.userNickname&&e.labels){console.log(this.editortitle,"头头3");var t=typeof e.suitCrowds;if(console.log(e.suitCrowds,"转换前"),console.log(t,"验证"),e.suitCrowds.length>0&&"object"===t&&(e.suitCrowds=e.suitCrowds.join(",")),"object"===typeof e.nicknames?e.nicknames=[]:""===e.nicknames?e.nicknames=[]:(e.nicknames=e.nicknames.replace(/,/g,"，"),e.nicknames=e.nicknames.replace(/ /g,""),e.nicknames=e.nicknames.split("，")),e.nicknames=(0,o.default)(new n.default(e.nicknames)),"添加作品"===this.editortitle){console.log(this.editortitle,"1"),console.log("是添加");var i=this;uni.showLoading({title:"生成作品中"}),i.$request.post(c.default.backUrl+"/work",e).then(function(e){uni.hideLoading(),1===e.code?uni.showModal({title:"提示",content:"添加作品成功",cancelText:"继续添加",confirmText:"返回列表",success:function(e){e.confirm?(console.log("点击确定"),i.is_typeshow=!1,i.getworklist()):e.cancel&&i.getworklist()}}):uni.showModal({title:"提示",content:e.msg,cancelText:"继续添加",confirmText:"返回列表",success:function(e){e.confirm?(i.is_typeshow=!1,i.getworklist()):e.cancel&&i.getworklist()}}),console.log(e)}).catch(function(e){console.error("error:",error)})}else if("确认编辑"===this.editortitle){console.log(this.editortitle,"1"),console.log("是修改");var a=this;uni.showLoading({title:"作品修改中"}),a.$request.put(c.default.backUrl+"/work/"+e.botAccount,e).then(function(e){uni.hideLoading(),1===e.code?uni.showModal({title:"提示",content:"修改作品成功",cancelText:"继续修改",confirmText:"返回列表",success:function(e){e.confirm?(a.is_typeshow=!1,a.getworklist()):e.cancel&&a.getworklist()}}):uni.showModal({title:"提示",content:e.msg,cancelText:"继续修改",confirmText:"返回列表",success:function(e){e.confirm?(a.is_typeshow=!1,a.getworklist()):e.cancel&&a.getworklist()}}),console.log(e)}).catch(function(e){console.error("error:",error)})}}else uni.showToast({title:"请填写必填项",icon:"none",duration:2e3})},returnworklist:function(){this.is_typeshow=!1},change:function(){},closeModal:function(){this.show_labelBOx=!1},checkboxChange_label:function(e){var t=e.target.value;console.log(t,"选择的集合");var i=[],a=this.labels;for(var n in console.log(a,"labels"),a)for(var o in a[n].labels)for(var r in t)t[r]==a[n].labels[o].id&&i.push({id:null,name:a[n].labels[o].name});this.selected=i},bindBtn:function(){var e="";for(var t in this.selected)e=e+","+this.selected[t].name;e=e.substr(1),console.log(this.label,"已经选择的标签"),this.label=e,this.workData.labels=this.selected}},onShow:function(){this.getworktype(),this.getworklist(),this.getLabelList(),this.editor_getworktype();var e=uni.getStorageSync("userinfo");this.userinfo=e},onLoad:function(e){var t=uni.getStorageSync("userinfo");this.userinfo=t}});t.default=g},d1a6:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,'.workname[data-v-2d0b4a45]{\r\n\t/* width: 25% !important; */}.t-td[data-v-2d0b4a45]{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.table[data-v-2d0b4a45]{table-layout:fixed}.icon[data-v-2d0b4a45]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;text-align:center}\r\n/* 编辑区域\n */.crowdbox[data-v-2d0b4a45]{border-bottom:1px solid silver}.crowdbox .uni-list[data-v-2d0b4a45]{padding:%?30?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.crowdbox .uni-list-cell[data-v-2d0b4a45]{margin:%?10?%;text-align:center;font-size:%?28?%}.crowdbox .title[data-v-2d0b4a45]{font-size:%?28?%;margin-top:%?30?%;margin-right:%?30?%}.crowdbox2[data-v-2d0b4a45]{padding:%?30?%;border-bottom:1px solid silver;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;font-size:%?32?%;margin-top:%?30?%;margin-right:%?30?%}.switchbox[data-v-2d0b4a45]{margin-left:30px;-webkit-transform:scale(.7);-ms-transform:scale(.7);transform:scale(.7);margin-top:%?-20?%}.collapse-box[data-v-2d0b4a45]{margin-top:%?10?%;background:#fff!important}.uni-collapse-cell[data-v-2d0b4a45]{z-index:1!important}.uni-picker-view-content[data-v-2d0b4a45]{z-index:999!important}.collapse-box2[data-v-2d0b4a45]{\r\n\t/* margin-top: 10upx */background:#fff!important}.imgbox[data-v-2d0b4a45]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;padding-left:%?30?%;padding-top:%?15?%;font-size:%?28?%;border-bottom:1px solid #d5d5d5}.imgbox .title[data-v-2d0b4a45]{margin-top:%?100?%;margin-right:%?30?%}.requried[data-v-2d0b4a45]:before{content:"*";color:#f56c6c;margin-right:2px}.labbox .text[data-v-2d0b4a45]:before{content:"*";color:#f56c6c;margin-right:2px}.returnworklist[data-v-2d0b4a45]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;width:100%;background:#f8f8f8;font-size:%?32?%;padding:%?6?%}.returnworklist .title[data-v-2d0b4a45]{margin-left:%?10?%}\r\n/* .Modallabelbox{\n\twidth: 90%;\n} */.neil-modal__container[data-v-2d0b4a45]{width:96%!important}\r\n/* 选中标签 */.toptitle[data-v-2d0b4a45]{width:100%;padding:%?20?%;text-align:center;font-size:%?32?%}.contentbox[data-v-2d0b4a45]{padding:%?30?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.contentbox .uni-list-cell[data-v-2d0b4a45]{\r\n\t/* flex: 1; */margin-bottom:%?10?%;width:20%;font-size:%?32?%;text-align:center;border-right:1px solid #f8f8f8}.contentbox .uni-list[data-v-2d0b4a45]{padding:%?30?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.manual_labels[data-v-2d0b4a45]{margin-top:%?60?%}.addbutton[data-v-2d0b4a45]{margin-top:20px;width:100%}.onetag[data-v-2d0b4a45]{background:#fff!important;border:1px solid #4cd964;width:auto;margin:%?10?%;padding:%?10?%;font-size:%?16?%}.deposit[data-v-2d0b4a45]{\r\n\t/* padding: 20px; */display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap}.fatherbox[data-v-2d0b4a45]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border:1px solid #eoeoeo}.neil-modal__container[data-v-2d0b4a45]{top:20%!important}.margin-top[data-v-2d0b4a45]{margin-top:%?20?%;margin-bottom:%?20?%}',""])},ddb0:function(e,t,i){"use strict";i.r(t);var a=i("48ec"),n=i("b1e4");for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);i("8ff8");var r=i("2877"),l=Object(r["a"])(n["default"],a["a"],a["b"],!1,null,"49a658e3",null);t["default"]=l.exports},e286:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!e.is_typeshow,expression:"!is_typeshow"}],staticClass:"worklist"},[i("v-uni-button",{staticClass:"margin-top",attrs:{type:"primary",plain:"true"},on:{click:function(t){t=e.$handleEvent(t),e.editor(e.item_NO,e.operation_add)}}},[e._v("添加作品")]),i("t-table",{staticClass:"table"},[i("t-tr",[i("t-th",[e._v("作品名称")]),i("t-th",{staticClass:"workname"},[e._v("作品状态")]),i("t-th",[e._v("操作")])],1),e._l(e.datalist,function(t,a){return i("t-tr",{key:a},[i("t-td",[i("v-uni-view",{on:{click:function(i){i=e.$handleEvent(i),e.gotoinfo(t)}}},[e._v(e._s(t.name))])],1),1===t.applyStatus?i("t-td",{staticClass:"workname"},[e._v("审核通过")]):e._e(),0===t.applyStatus?i("t-td",{staticClass:"workname"},[e._v("未发布")]):e._e(),-1===t.applyStatus?i("t-td",{staticClass:"workname"},[e._v("审核未通过")]):e._e(),2===t.applyStatus?i("t-td",{staticClass:"workname"},[e._v("待审核")]):e._e(),i("t-td",[i("fa-icon",{attrs:{type:"send-o icon",size:"20",color:"#666"},on:{click:function(i){i=e.$handleEvent(i),e.dec_publish(t)}}}),i("fa-icon",{attrs:{type:"wrench icon",size:"20",color:"#666"},on:{click:function(i){i=e.$handleEvent(i),e.editor(t,e.operation_editor)}}}),i("fa-icon",{attrs:{type:"trash-o icon",size:"20",color:"#666"},on:{click:function(i){i=e.$handleEvent(i),e.dec_delete(t)}}})],1)],1)})],2)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.is_typeshow,expression:"is_typeshow"}],staticClass:"editor"},[i("v-uni-view",{staticClass:"returnworklist",on:{click:function(t){t=e.$handleEvent(t),e.returnworklist(t)}}},[i("fa-icon",{attrs:{type:"arrow-left ",size:"22",color:"#666"}}),i("v-uni-view",{staticClass:"title"},[e._v("返回作品列表")])],1),i("catLabel",{attrs:{dataType:"text",inputType:"text",text:"作品名称",hasX:""},model:{value:e.workData.name,callback:function(t){e.$set(e.workData,"name",t)},expression:"workData.name"}}),i("catLabel",{attrs:{dataType:"text",inputType:"text",text:"作品别名"},model:{value:e.workData.nicknames,callback:function(t){e.$set(e.workData,"nicknames",t)},expression:"workData.nicknames"}}),i("catLabel",{attrs:{text:"功能用途",initIndex:e.worktype_initIndex,dataType:"selector",selectList:e.selector_worktype,hasX:""},on:{handSelect:function(t){t=e.$handleEvent(t),e.worktype_handSelect(t)}}}),i("v-uni-view",{staticClass:"crowdbox"},[i("v-uni-radio-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.radioChange(t)}}},[i("v-uni-view",{staticClass:"title requried"},[e._v("版本类型")]),e._l(e.editionItems,function(t,a){return i("v-uni-label",{key:t.value,staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",[i("v-uni-radio",{attrs:{value:t.value,checked:a===e.editionItems_current}})],1),i("v-uni-view",[e._v(e._s(t.name))])],1)})],2)],1),i("v-uni-view",{staticClass:"imgbox"},[i("v-uni-view",{staticClass:"title requried"},[e._v("作品封面")]),i("robby-image-upload",{attrs:{"enable-del":e.enableDel,"enable-add":e.enableAdd,limit:e.limitNumber},on:{delete:function(t){t=e.$handleEvent(t),e.deleteImage(t)},add:function(t){t=e.$handleEvent(t),e.addImage(t)}},model:{value:e.imageData,callback:function(t){e.imageData=t},expression:"imageData"}})],1),i("catLabel",{attrs:{text:"作品简介",dataType:"textarea",textareaLength:"1024",hasX:""},model:{value:e.workData.intro,callback:function(t){e.$set(e.workData,"intro",t)},expression:"workData.intro"}}),i("v-uni-view",{staticClass:"crowdbox"},[i("v-uni-radio-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.radioChange3(t)}}},[i("v-uni-view",{staticClass:"title requried"},[e._v("作品资费")]),e._l(e.freeItems,function(t,a){return i("v-uni-label",{key:t.value,staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",[i("v-uni-radio",{attrs:{value:t.value,checked:a===e.free_current}})],1),i("v-uni-view",[e._v(e._s(t.name))])],1)})],2)],1),i("v-uni-view",{staticClass:"labbox",on:{click:function(t){t=e.$handleEvent(t),e.goSelectlabel(t)}}},[i("catLabel",{attrs:{text:"作品标签",dataText:e.label,hasX:""}})],1),i("v-uni-view",{staticClass:"crowdbox"},[i("v-uni-radio-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.radioChange2(t)}}},[i("v-uni-view",{staticClass:"title requried"},[e._v("难易程度")]),e._l(e.degreeItems,function(t,a){return i("v-uni-label",{key:t.value,staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",[i("v-uni-radio",{attrs:{value:t.value,checked:a===e.degree_current}})],1),i("v-uni-view",[e._v(e._s(t.name))])],1)})],2)],1),i("v-uni-view",{staticClass:"crowdbox"},[i("v-uni-checkbox-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.checkboxChange(t)}}},[i("v-uni-view",{staticClass:"title requried"},[e._v("适宜人群")]),e._l(e.checkboxItems,function(t){return i("v-uni-label",{key:t.name,staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",[i("v-uni-checkbox",{attrs:{value:t.value,checked:t.checked}}),i("v-uni-view",[e._v(e._s(t.value))])],1)],1)})],2)],1),i("catLabel",{attrs:{dataType:"text",inputType:"text",text:"作者名称",hasX:""},model:{value:e.workData.userNickname,callback:function(t){e.$set(e.workData,"userNickname",t)},expression:"workData.userNickname"}}),i("catLabel",{attrs:{text:"创作者说",dataType:"textarea",textareaLength:"1024",hasX:""},model:{value:e.workData.preface,callback:function(t){e.$set(e.workData,"preface",t)},expression:"workData.preface"}}),i("uni-collapse",{on:{change:function(t){t=e.$handleEvent(t),e.change(t)}}},[i("uni-collapse-item",{attrs:{title:"其他"}},[i("uni-list",[i("v-uni-view",{staticClass:"crowdbox"},[i("v-uni-radio-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.radioChange4(t)}}},[i("v-uni-view",{staticClass:"title requried"},[e._v("启动选项")]),e._l(e.startItems,function(t,a){return i("v-uni-label",{key:t.value,staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",[i("v-uni-radio",{attrs:{value:t.value,checked:a===e.start_current}})],1),i("v-uni-view",[e._v(e._s(t.name))])],1)})],2)],1),i("v-uni-view",{staticClass:"crowdbox"},[i("v-uni-checkbox-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.checkboxChange2(t)}}},[i("v-uni-view",{staticClass:"title"},[e._v("选项设置")]),e._l(e.settingworktype,function(t){return i("v-uni-label",{key:t.name,staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",[i("v-uni-checkbox",{attrs:{value:t.name,checked:t.checked}}),i("v-uni-view",[e._v(e._s(t.value))])],1)],1)})],2)],1),i("catLabel",{attrs:{dataType:"text",inputType:"text",text:"表单网站"},model:{value:e.workData.postURL,callback:function(t){e.$set(e.workData,"postURL",t)},expression:"workData.postURL"}}),i("catLabel",{attrs:{dataType:"text",inputType:"text",text:"配置参数"},model:{value:e.workData.configContent,callback:function(t){e.$set(e.workData,"configContent",t)},expression:"workData.configContent"}}),i("v-uni-view",{staticClass:"crowdbox2"},[i("v-uni-view",{staticClass:"title"},[e._v("自动存档")]),i("v-uni-view",{staticClass:"switchbox"},[i("v-uni-switch",{attrs:{checked:e.hadOpen},on:{change:function(t){t=e.$handleEvent(t),e.switch1Change(t)}}})],1)],1)],1)],1)],1),i("v-uni-button",{staticClass:"margin-top",attrs:{type:"primary",plain:"true"},on:{click:function(t){t=e.$handleEvent(t),e.editor_adddata(t)}}},[e._v(e._s(e.editortitle))])],1),i("neil-modal",{staticClass:"Modallabelbox",attrs:{show:e.show_labelBOx,title:"选择作品标签","confirm-text":"确定选择","cancel-text":"取消选择","auto-close":!1},on:{close:function(t){t=e.$handleEvent(t),e.closeModal(t)},confirm:function(t){t=e.$handleEvent(t),e.bindBtn("confirm")}}},[i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.show_labelBOx,expression:"show_labelBOx"}],staticClass:"Modallabelbox"},[i("uni-collapse",{attrs:{accordion:!0},on:{change:function(t){t=e.$handleEvent(t),e.change(t)}}},[i("v-uni-checkbox-group",{staticClass:"uni-list",on:{change:function(t){t=e.$handleEvent(t),e.checkboxChange_label(t)}}},e._l(e.labels,function(t,a){return i("uni-collapse-item",{attrs:{title:t.name}},[i("uni-list",{staticClass:"contentbox"},e._l(t.labels,function(t){return i("v-uni-label",{key:t.id,staticClass:"uni-list-cell uni-list-cell-pd"},[i("v-uni-view",[i("v-uni-checkbox",{attrs:{value:t.id,checked:t.checked}}),i("v-uni-view",[e._v(e._s(t.name))])],1)],1)}),1)],1)}),1)],1),i("v-uni-view",{staticClass:"fatherbox"},[i("v-uni-view",{staticClass:"toptitle"},[e._v("已选标签")]),i("v-uni-view",{staticClass:"deposit"},e._l(e.selected,function(t,a){return i("v-uni-view",{staticClass:"onetag",attrs:{text:"标签",type:"danger",inverted:"false"}},[e._v(e._s(t.name))])}),1)],1)],1)],1)],1)},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},f00e:function(e,t,i){"use strict";var a=i("5063"),n=i.n(a);n.a},ffb3:function(e,t,i){"use strict";var a=i("be2d"),n=i.n(a);n.a}}]);