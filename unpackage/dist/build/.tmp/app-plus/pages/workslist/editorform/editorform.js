(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/workslist/editorform/editorform"],{"2cb2":function(e,t,r){"use strict";(function(e){r("bf90"),r("921b");o(r("66fd"));var t=o(r("3859"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("6e42")["createPage"])},3859:function(e,t,r){"use strict";r.r(t);var o=r("9c20"),i=r("b7c5");for(var n in i)"default"!==n&&function(e){r.d(t,e,function(){return i[e]})}(n);r("4eec");var a=r("2877"),s=Object(a["a"])(i["default"],o["a"],o["b"],!1,null,null,null);t["default"]=s.exports},4529:function(e,t,r){},"4eec":function(e,t,r){"use strict";var o=r("4529"),i=r.n(o);i.a},"9c20":function(e,t,r){"use strict";var o=function(){var e=this,t=e.$createElement;e._self._c},i=[];r.d(t,"a",function(){return o}),r.d(t,"b",function(){return i})},a529:function(e,t,r){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("0b8d")),n=r("f8e2");function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){return r.e("components/cat-label/cat-label").then(r.bind(null,"31ea"))},l=(r("b410"),function(){return r.e("components/uni-ui/uni-collapse/uni-collapse").then(r.bind(null,"42d6"))}),c=function(){return r.e("components/uni-ui/uni-collapse-item/uni-collapse-item").then(r.bind(null,"87e1"))},u=function(){return r.e("components/uni-ui/uni-list/uni-list").then(r.bind(null,"e148"))},d=function(){return r.e("components/uni-ui/uni-list-item/uni-list-item").then(r.bind(null,"5d5b"))},f=function(){return r.e("components/robby-image-upload/robby-image-upload").then(r.bind(null,"8b9c"))},h={components:{catLabel:s,uniCollapse:l,uniCollapseItem:c,uniList:u,uniListItem:d,robbyImageUpload:f},data:function(){return{userinfo:{},imageData:"",fileList:"",enableDel:!0,limitNumber:1,enableAdd:!0,img:"",bannerImgUrl:"",hadOpen:!0,worktype_initIndex:0,worktype:[],selector_worktype:[],degreeItems:[{value:"1",name:"简单"},{value:"2",name:"中等"},{value:"3",name:"困难"}],degree_current:0,editionItems:[{value:"1",name:"文字版"},{value:"2",name:"声音版"}],editionItems_current:0,freeItems:[{value:"1",name:"免费"},{value:"2",name:"付费"}],free_current:0,startItems:[{value:"1",name:"询问开始或继续"},{value:"2",name:"快速开始"},{value:"2",name:"继续"}],start_current:0,checkboxItems:[{name:"1",value:"儿童"},{name:"2",value:"学生"},{name:"3",value:"成人"}],settingworktype:[{name:"debug",value:"调试词性"},{name:"disable_time_recognition",value:"时间禁用多次识别"}],label:"",workData:{name:"",intro:"",userId:"",bannerImgUrl:"",preface:"",labels:[],difficulty:"简单",cache:!0,userNickname:"",suitCrowds:"",wordNum:"",postURL:"",configContent:"",postActive:!1,startOption:1,extraOptions:[],edition:1,workType:0,startAge:1,stopAge:100,free:0,nicknames:"",username:""}}},methods:{getworktype:function(){var t=this;t.$request.get(i.default.backUrl+"/workType").then(function(r){var o=[];for(var i in r.data){var n={label:"",value:"",index:"",level:""};n.label=r.data[i].name,n.value=r.data[i].id,n.index=parseInt(i),n.level=r.data[i].level,o.push(n)}t.worktype=r.data,t.selector_worktype=o,console.log(e(t.selector_worktype,"下拉框数据"," at pages\\workslist\\editorform\\editorform.vue:283"))}).catch(function(t){console.error(e("error:",t," at pages\\workslist\\editorform\\editorform.vue:286"))})},editionList_handSelect:function(t){console.log(e(t," at pages\\workslist\\editorform\\editorform.vue:291")),this.editionList_initIndex=t.checkArr.index,console.log(e(this.editionList_initIndex,"索引"," at pages\\workslist\\editorform\\editorform.vue:293")),0===this.editionList_initIndex?this.workData.edition=1:1===this.worktype_initIndex&&(this.workData.edition=2),console.log(e(this.workData.edition,"版本类型"," at pages\\workslist\\editorform\\editorform.vue:299"))},worktype_handSelect:function(t){console.log(e(t," at pages\\workslist\\editorform\\editorform.vue:303")),this.worktype_initIndex=t.checkArr.index,this.workData.workType=this.selector_worktype[t.checkArr.index].value,this.isshow=this.selector_worktype[t.checkArr.index].value,console.log(e(this.workData.workType,"id"," at pages\\workslist\\editorform\\editorform.vue:307"))},radioChange2:function(t){for(var r=0;r<this.degreeItems.length;r++)if(this.degreeItems[r].value===t.target.value){this.degree_current=r;break}console.log(e(this.degree_current,"单选"," at pages\\workslist\\editorform\\editorform.vue:317")),0===this.degree_current?this.workData.difficulty="简单":1===this.degree_current?this.workData.difficulty="中等":2===this.degree_current&&(this.workData.difficulty="困难")},radioChange:function(t){for(var r=0;r<this.editionItems.length;r++)if(this.editionItems[r].value===t.target.value){this.editionItems_current=r;break}console.log(e(this.editionItems_current,"单选"," at pages\\workslist\\editorform\\editorform.vue:335")),0===this.editionItems_current?this.workData.edition=1:1===this.degree_initIndex&&(this.workData.edition=2)},radioChange3:function(e){for(var t=0;t<this.freeItems.length;t++)if(this.freeItems[t].value===e.target.value){this.free_current=t;break}0===this.free_current?this.workData.free=0:1===this.free_current&&(this.workData.free=1)},radioChange4:function(e){for(var t=0;t<this.startItems.length;t++)if(this.freeItems[t].value===e.target.value){this.start_current=t;break}0===this.start_current?this.workData.startOption=1:1===this.start_current?this.workData.startOption=2:2===this.start_current&&(this.workData.startOption=3)},checkboxChange:function(t){console.log(e(t," at pages\\workslist\\editorform\\editorform.vue:374"));for(var r=t.target.value,o={},i=0;i<this.checkboxItems.length;i++)-1!==r.indexOf(this.checkboxItems[i].name)?o["checkboxItems["+i+"].checked"]=!0:o["checkboxItems["+i+"].checked"]=!1;this.workData.suitCrowds=t.target.value},checkboxChange2:function(t){console.log(e(t," at pages\\workslist\\editorform\\editorform.vue:388"));for(var r=t.target.value,o={},i=0;i<this.settingworktype.length;i++)-1!==r.indexOf(this.settingworktype[i].name)?o["settingworktype["+i+"].checked"]=!0:o["settingworktype["+i+"].checked"]=!1;this.workData.extraOptions=r},goSelectlabel:function(){var e=JSON.stringify(this.workData.labels);o.navigateTo({url:"../Selectlabel/Selectlabel?data="+e})},switch1Change:function(t){console.log(e("switch1 发生 change 事件，携带值为",t.target.value," at pages\\workslist\\editorform\\editorform.vue:409")),this.workData.cache=t.target.value},addImage:function(t){var r=t.allImages[0],o=this;(0,n.pathToBase64)(r).then(function(t){var r=i.default.backUrl+"/upload/img",n={data:t};o.$request.post(r,n).then(function(e){1===e.code&&(o.workData.bannerImgUrl=e.data.absolutePath)}).catch(function(t){console.error(e("error:",t," at pages\\workslist\\editorform\\editorform.vue:429"))})}).catch(function(t){console.error(e(t," at pages\\workslist\\editorform\\editorform.vue:433"))})},adddata:function(){var t=JSON.parse(JSON.stringify(this.workData));if(t.intro&&t.suitCrowds&&t.userNickname&&t.preface&&t.difficulty&&t.userNickname&&t.labels){t.suitCrowds.length>0&&(t.suitCrowds=t.suitCrowds.join(",")),t.nicknames?(t.nicknames=t.nicknames.replace(/,/g,"，"),t.nicknames=t.nicknames.replace(/ /g,""),t.nicknames=t.nicknames.split("，")):t.nicknames=[],t.nicknames=Array.from(new Set(t.nicknames)),console.log(e(t,"要发送的数据"," at pages\\workslist\\editorform\\editorform.vue:460"));var r=this;o.showLoading({title:"生成作品中"}),r.$request.post(i.default.backUrl+"/work",t).then(function(t){o.hideLoading(),1===t.code&&o.showModal({title:"提示",content:"添加作品成功",cancelText:"继续添加",confirmText:"返回列表",success:function(e){e.confirm?o.reLaunch({url:"/pages/workslist/workslist"}):e.cancel}}),console.log(e(t," at pages\\workslist\\editorform\\editorform.vue:489"))}).catch(function(t){console.error(e("error:",error," at pages\\workslist\\editorform\\editorform.vue:492"))})}else o.showToast({title:"请填写必填项",icon:"none",duration:2e3})},change:function(){}},onShow:function(){this.getworktype()},onLoad:function(e){var t=o.getStorageSync("userinfo");if(this.userinfo=t,this.workData.userNickname=t.nickname,this.workData.username=t.username,e.workdata)JSON.parse(e.workdata);else if(e.data){var r=JSON.parse(e.data),i="";for(var n in this.workData.labels=r,this.workData.labels)i=i+","+this.workData.labels[n].name;i=i.substr(1),this.label=i}}};t.default=h}).call(this,r("0de9")["default"],r("6e42")["default"])},b7c5:function(e,t,r){"use strict";r.r(t);var o=r("a529"),i=r.n(o);for(var n in o)"default"!==n&&function(e){r.d(t,e,function(){return o[e]})}(n);t["default"]=i.a}},[["2cb2","common/runtime","common/vendor"]]]);