(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/workpage/map/editor"],{1604:function(e,a,t){"use strict";(function(e,o){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=t("47cc");function i(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var l={data:function(){var e;return{workinfo:{},postdata:(e={name:"",nickname:"",goFlag:"",ableGoName:[],ableGo:[],intro:"",isBase:""},i(e,"isBase",!1),i(e,"projectId",""),e),placeLevel:[{value:1,name:"相邻可达"},{value:2,name:"相通可达"},{value:3,name:"任意可达"},{value:4,name:"不可到达"}],ableGoName:[],buttonname:"增加地点",operation_type:"push"}},methods:{getdatalist:function(){console.log(e(this.workinfo,"当前作品数据"," at pages\\workpage\\map\\editor.vue:48"));var a=this;a.$request.get("/place/?projectId="+a.workinfo.id).then(function(e){var t=[];for(var o in e.data){var n={name:e.data[o].name,value:e.data[o].id};t.push(n)}a.ableGoName=t}).catch(function(a){console.error(e("error:",a," at pages\\workpage\\map\\editor.vue:64"))})},senddata:function(){var a=JSON.parse(JSON.stringify(this.postdata));if("push"===this.operation_type){if(""===a.name)return void o.showToast({icon:"none",position:"bottom",title:"请输入地点名"});if(a.nickname){var t=a.nickname.replace(/，/g,","),i=t.split(","),l=!0,r=!1,s=void 0;try{for(var c,u=i[Symbol.iterator]();!(l=(c=u.next()).done);l=!0){var m=c.value,p=m.replace(/｛/g,"{");p=p.split("{")[0];var f=(0,n.lg_cn_Check)(p);if(!f)return void o.showToast({icon:"none",position:"bottom",title:"地点别名只能输入中文、数字与逗号"})}}catch(O){r=!0,s=O}finally{try{l||null==u.return||u.return()}finally{if(r)throw s}}a.nickname=t}if(a.projectId=this.workinfo.id,0===a.ableGoName.length&&(a.ableGoName="",a.ableGo=[]),0!==a.ableGoName.length){for(var d in a.ableGoName)for(var h in this.ableGoName)a.ableGoName[d]===this.ableGoName[h].value&&a.ableGo.push(this.ableGoName[h].value);var v=[];for(var g in a.ableGoName)for(var b in this.ableGoName)a.ableGoName[g]===this.ableGoName[h].value&&v.push(this.ableGoName[b].name);a.ableGoName=v,a.ableGoName=a.ableGoName.join(",")}console.log(e(a,"提交的数据"," at pages\\workpage\\map\\editor.vue:121")),o.showLoading({title:"添加地点中"});var G=this;this.$request.post("/place/",a).then(function(a){o.hideLoading(),1===a.code?o.showModal({title:"提示",content:"添加地点成功",cancelText:"继续添加",confirmText:"返回列表",success:function(a){a.confirm?(console.log(e("点击确定"," at pages\\workpage\\map\\editor.vue:138")),G.is_typeshow=!1,G.getdatalist(),o.navigateBack({delta:1})):a.cancel&&G.getdatalist()}}):o.showModal({title:"提示",content:a.msg,cancelText:"继续添加",confirmText:"返回列表",success:function(e){e.confirm?(G.is_typeshow=!1,G.getdatalist(),o.navigateBack({delta:1})):e.cancel&&G.getdatalist()}}),console.log(e(a," at pages\\workpage\\map\\editor.vue:168"))}).catch(function(a){console.log(e(a," at pages\\workpage\\map\\editor.vue:171"))})}else if("change"===this.operation_type){if(console.log(e(a,"提交的数据1"," at pages\\workpage\\map\\editor.vue:174")),""===a.name)return void o.showToast({icon:"none",position:"bottom",title:"请输入地点名"});if(a.nickname){var N=a.nickname.replace(/，/g,","),w=N.split(","),k=!0,y=!1,_=void 0;try{for(var T,x=w[Symbol.iterator]();!(k=(T=x.next()).done);k=!0){var j=T.value,S=j.replace(/｛/g,"{");S=S.split("{")[0];var B=(0,n.lg_cn_Check)(S);if(!B)return void o.showToast({icon:"none",position:"bottom",title:"地点别名只能输入中文、数字与逗号"})}}catch(O){y=!0,_=O}finally{try{k||null==x.return||x.return()}finally{if(y)throw _}}a.nickname=N}if(a.projectId=this.workinfo.id,0===a.ableGoName.length&&(a.ableGoName="",a.ableGo=[]),0!==a.ableGoName.length){var I=[];for(var d in a.ableGoName)for(var h in this.ableGoName)a.ableGoName[d]==this.ableGoName[h].value&&I.push(this.ableGoName[h].value);a.ableGo=I;var L=[];for(var g in a.ableGoName)for(var b in this.ableGoName)a.ableGoName[g]==this.ableGoName[b].value&&L.push(this.ableGoName[b].name);a.ableGoName=L,a.ableGoName=a.ableGoName.join(",")}console.log(e(a,"提交的数据"," at pages\\workpage\\map\\editor.vue:229")),o.showLoading({title:"添加地点中"});var M=this;this.$request.put("/place/"+a.id+"/",a).then(function(a){o.hideLoading(),1===a.code?o.showModal({title:"提示",content:"修改地点成功",cancelText:"继续修改",confirmText:"返回列表",success:function(a){a.confirm?(console.log(e("点击确定"," at pages\\workpage\\map\\editor.vue:250")),M.is_typeshow=!1,M.getdatalist(),o.navigateBack({delta:1})):a.cancel&&M.getdatalist()}}):o.showModal({title:"提示",content:a.msg,cancelText:"继续修改",confirmText:"返回列表",success:function(e){e.confirm?(M.is_typeshow=!1,M.getdatalist(),o.navigateBack({delta:1})):e.cancel&&M.getdatalist()}}),console.log(e(a," at pages\\workpage\\map\\editor.vue:280"))}).catch(function(a){console.log(e(a," at pages\\workpage\\map\\editor.vue:283"))})}}},onShow:function(){},onLoad:function(a){var t=o.getStorageSync("workinfo");if(this.workinfo=t,a.mapinfo){this.buttonname="修改地点",this.getdatalist(),this.operation_type="change";var n=JSON.parse(a.mapinfo);console.log(e(n,"接受的数据"," at pages\\workpage\\map\\editor.vue:299"));var i=[];for(var l in this.ableGoName)if(n.name!==this.ableGoName[l].name){var r={name:this.ableGoName[l].name,value:this.ableGoName[l].name};i.push(r)}this.ableGoName=i,this.postdata=n;var s=n.ableGo.map(function(e){return parseInt(e)});this.postdata.ableGoName=s,console.log(e(this.postdata.ableGoName,"转换类型后的数据"," at pages\\workpage\\map\\editor.vue:317"))}else this.getdatalist(),this.operation_type="push",this.buttonname="增加地点",this.postdata={name:"",nickname:"",goFlag:"",ableGoName:[],ableGo:[],intro:"",isBase:!1,projectId:""}},mounted:function(){}};a.default=l}).call(this,t("0de9")["default"],t("6e42")["default"])},4744:function(e,a,t){"use strict";var o=function(){var e=this,a=e.$createElement;e._self._c},n=[];t.d(a,"a",function(){return o}),t.d(a,"b",function(){return n})},7731:function(e,a,t){},"853b":function(e,a,t){"use strict";var o=t("7731"),n=t.n(o);n.a},"9c9b":function(e,a,t){"use strict";t.r(a);var o=t("1604"),n=t.n(o);for(var i in o)"default"!==i&&function(e){t.d(a,e,function(){return o[e]})}(i);a["default"]=n.a},b581:function(e,a,t){"use strict";t.r(a);var o=t("4744"),n=t("9c9b");for(var i in n)"default"!==i&&function(e){t.d(a,e,function(){return n[e]})}(i);t("853b");var l=t("2877"),r=Object(l["a"])(n["default"],o["a"],o["b"],!1,null,null,null);a["default"]=r.exports},c2c2:function(e,a,t){"use strict";(function(e){t("bf90"),t("921b");o(t("66fd"));var a=o(t("b581"));function o(e){return e&&e.__esModule?e:{default:e}}e(a.default)}).call(this,t("6e42")["createPage"])}},[["c2c2","common/runtime","common/vendor"]]]);