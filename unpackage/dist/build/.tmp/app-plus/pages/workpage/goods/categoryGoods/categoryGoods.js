(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/workpage/goods/categoryGoods/categoryGoods"],{"0fdd":function(t,o,a){"use strict";var s=a("3650"),e=a.n(s);e.a},1497:function(t,o,a){"use strict";a.r(o);var s=a("b43f"),e=a.n(s);for(var n in s)"default"!==n&&function(t){a.d(o,t,function(){return s[t]})}(n);o["default"]=e.a},3650:function(t,o,a){},"7b91":function(t,o,a){"use strict";var s=function(){var t=this,o=t.$createElement;t._self._c},e=[];a.d(o,"a",function(){return s}),a.d(o,"b",function(){return e})},"89f0":function(t,o,a){"use strict";a.r(o);var s=a("7b91"),e=a("1497");for(var n in e)"default"!==n&&function(t){a.d(o,t,function(){return e[t]})}(n);a("0fdd");var r=a("2877"),i=Object(r["a"])(e["default"],s["a"],s["b"],!1,null,null,null);o["default"]=i.exports},"9ea7":function(t,o,a){"use strict";(function(t){a("bf90"),a("921b");s(a("66fd"));var o=s(a("89f0"));function s(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,a("6e42")["createPage"])},b43f:function(t,o,a){"use strict";(function(t,a){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var s={data:function(){return{postdata:{goodsInstanceAttrVos:[{goodsClassAttrId:"",name:"可被询问",value:""},{goodsClassAttrId:"",name:"所属角色",value:""},{goodsClassAttrId:"",name:"所在地点",value:""}],othergoodsInstanceAttrVos:[],goodsClassId:"",name:"",intro:"",nickname:"",npcId:"",npcName:"",placeId:"",placeName:""},NPClist:[],Maplist:[],allNPClist:[],allMaplist:[],allCategorylist:[],Categorylist:[],inquire:[["是","否"]],workinfo:{},operation:"push",showelement:!1,updateview:!0}},methods:{changecategory:function(o){0===o.value.length&&(o.value[0]=0);var a=o.value[0];console.log(t(this.allCategorylist[a].goodsClassAttrVos,"看看是什么东西"," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:81")),this.postdata.goodsClassId=this.allCategorylist[a].id;var s=this.allCategorylist[a].goodsClassAttrVos,e=[];if(s.length>3)for(var n in s)n>2&&e.push(s[n]);this.othergoodsInstanceAttrVos=e,this.postdata.goodsInstanceAttrVos[0].goodsClassAttrId=this.allCategorylist[a].goodsClassAttrVos[0].id,this.postdata.goodsInstanceAttrVos[1].goodsClassAttrId=this.allCategorylist[a].goodsClassAttrVos[1].id,this.postdata.goodsInstanceAttrVos[2].goodsClassAttrId=this.allCategorylist[a].goodsClassAttrVos[2].id},submitdata:function(){var o=JSON.parse(JSON.stringify(this.postdata));if("push"===this.operation){if(""!==o.goodsInstanceAttrVos[0].value){var s=o.goodsInstanceAttrVos[0].value.data[0];o.goodsInstanceAttrVos[0].value="否"===s?"否":"是"===s?"是":o.goodsInstanceAttrVos[0].value.data[0]}if(""!=o.goodsInstanceAttrVos[1].value){var e=o.goodsInstanceAttrVos[1].value.data[0];for(var n in this.allNPClist)this.allNPClist[n].name===e&&(o.goodsInstanceAttrVos[1].value=this.allNPClist[n].id)}if(""!==o.goodsInstanceAttrVos[2].value){var r=o.goodsInstanceAttrVos[2].value.data[0];for(var n in this.allMaplist)this.allMaplist[n].name===r&&(o.goodsInstanceAttrVos[2].value=this.allMaplist[n].id)}if(!o.goodsClassId)return void a.showToast({icon:"none",title:"请选择物品分类"});if(!o.name)return void a.showToast({icon:"none",title:"物品名称不能为空"});if(!o.goodsInstanceAttrVos[0].value)return void a.showToast({icon:"none",title:"请选择是否可被询问"});console.log(t(o,"提交的数据"," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:150"));var i=this;i.$request.post("/goods/instance/",o).then(function(o){console.log(t(o," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:155")),1===o.code?a.showModal({title:"提示",content:"添加类别成功",cancelText:"继续添加",confirmText:"返回列表",success:function(o){o.confirm?(console.log(t("点击确定"," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:164")),a.navigateBack({delta:1})):o.cancel}}):a.showModal({title:"提示",content:o.msg,cancelText:"继续添加",confirmText:"返回列表",success:function(o){o.confirm?(console.log(t("点击确定"," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:180")),a.navigateBack({delta:1})):o.cancel}})}).catch(function(o){console.log(t(o," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:191"))})}else if("change"===this.operation){for(var n in console.log(t(o,"编辑提交的数据"," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:196")),o.goodsInstanceAttrVos)""===o.goodsInstanceAttrVos[n].nickname&&(o.goodsInstanceAttrVos[n].nickname=null);if(o.goodsInstanceAttrVos=o.goodsInstanceAttrVos.concat(this.othergoodsInstanceAttrVos),""!==o.goodsInstanceAttrVos[0].value){var l=o.goodsInstanceAttrVos[0].value.data[0];"否"===l?o.goodsInstanceAttrVos[0].value="否":"是"===l&&(o.goodsInstanceAttrVos[0].value="是")}if(""!==o.goodsInstanceAttrVos[1].value&&null!==o.goodsInstanceAttrVos[1].value){var c=o.goodsInstanceAttrVos[1].value.data[0];for(var n in this.allNPClist)this.allNPClist[n].name===c&&(o.goodsInstanceAttrVos[1].value=this.allNPClist[n].id)}if(""!==o.goodsInstanceAttrVos[2].value&&null!==o.goodsInstanceAttrVos[2].value){var d=o.goodsInstanceAttrVos[2].value.data[0];for(var n in this.allMaplist)this.allMaplist[n].name===d&&(o.goodsInstanceAttrVos[2].value=this.allMaplist[n].id)}if(""!==o.goodsClassId.value&&null!==o.goodsClassId.value&&"[object Object]"===Object.prototype.toString.call(o.goodsClassId)){var g=o.goodsClassId.data[0];for(var n in this.allCategorylist)this.allCategorylist[n].name===g&&(o.goodsClassId=this.allCategorylist[n].id)}if(!o.name)return void a.showToast({icon:"none",title:"分类名称不能为空"});o.projectId=this.workinfo.id;var u=this;u.$request.put("/goods/instance//"+u.workinfo.id+"/",o).then(function(o){console.log(t(o," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:263")),1===o.code?a.showModal({title:"提示",content:"编辑物品成功",cancelText:"继续编辑",confirmText:"返回列表",success:function(o){o.confirm?(console.log(t("点击确定"," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:272")),a.navigateBack({delta:1})):o.cancel}}):a.showModal({title:"提示",content:o.msg,cancelText:"继续编辑",confirmText:"返回列表",success:function(o){o.confirm?(console.log(t("点击确定"," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:288")),a.navigateBack({delta:1})):o.cancel}})}).catch(function(o){console.log(t(o," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:299"))})}},getCategorylist:function(){var o=this,a=this;a.$request.get("/goods/class/?projectId="+a.workinfo.id).then(function(t){if(1===t.code){var s=[[]];for(var e in t.data)s[0].push(t.data[e].name);a.allCategorylist=t.data,a.Categorylist=s,o.setPickerDatac()}}).catch(function(o){console.error(t("error:",o," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:319"))})},getmaplist:function(){var o=this,a=this;a.$request.get("/place/?projectId="+a.workinfo.id).then(function(t){var s=[[]];for(var e in t.data)s[0].push(t.data[e].name);a.allMaplist=t.data,a.Maplist=s,o.setPickerDatac()}).catch(function(o){console.error(t("error:",o," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:336"))})},getNPClist:function(){var o=this,a=this;a.$request.get("/npc/instance_by_project_id/"+a.workinfo.id+"/").then(function(t){var s=[[]];for(var e in t.data)s[0].push(t.data[e].name);a.allNPClist=t.data,a.NPClist=s,o.setPickerDatac()}).catch(function(o){console.error(t("error:",o," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:353"))})},initialize1:function(){var o=this;o.$request.get("/npc/instance_by_project_id/"+o.workinfo.id+"/").then(function(t){var a=[[]];for(var s in t.data)a[0].push(t.data[s].name);if(o.allNPClist=t.data,o.NPClist=a,""!==o.postdata.goodsInstanceAttrVos[1].value){var e=o.postdata.goodsInstanceAttrVos[1].value;for(var s in o.allNPClist)o.allNPClist[s].id===parseInt(e)&&(o.postdata.goodsInstanceAttrVos[1].value={data:[o.allNPClist[s].name],value:[parseInt(s)]},o.$set(o.postdata.goodsInstanceAttrVos,1,o.postdata.goodsInstanceAttrVos[1]))}o.initialize2()}).catch(function(o){console.error(t("error:",o," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:384"))})},initialize2:function(){console.log(t("initialize2"," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:388"));var o=this;o.$request.get("/place/?projectId="+o.workinfo.id).then(function(t){var a=[[]];for(var s in t.data)a[0].push(t.data[s].name);if(o.allMaplist=t.data,o.Maplist=a,""!==o.postdata.goodsInstanceAttrVos[2].value){var e=o.postdata.goodsInstanceAttrVos[2].value;for(var s in o.allMaplist)o.allMaplist[s].id===parseInt(e)&&(o.postdata.goodsInstanceAttrVos[2].value={data:[o.allMaplist[s].name],value:[parseInt(s)]},o.$set(o.postdata.goodsInstanceAttrVos,2,o.postdata.goodsInstanceAttrVos[2]))}o.initialize3()}).catch(function(o){console.error(t("error:",o," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:414"))})},initialize3:function(){console.log(t("initialize3"," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:418"));var o=this;o.$request.get("/goods/class/?projectId="+o.workinfo.id).then(function(a){if(1===a.code){var s=[[]];for(var e in a.data)s[0].push(a.data[e].name);if(o.allCategorylist=a.data,o.Categorylist=s,""!==o.postdata.goodsClassId){var n=o.postdata.goodsClassId;for(var e in o.allCategorylist)o.allCategorylist[e].id===parseInt(n)&&(o.postdata.goodsClassId={data:[o.allCategorylist[e].name],value:[parseInt(e)]})}o.updateview=!0,console.log(t(o.updateview,"此时的updateview"," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:442")),o.$nextTick(function(){o.setPickerDatac2()})}}).catch(function(o){console.error(t("error:",o," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:449"))})},setPickerDatac:function(){this.$refs.pickerCustom1.setData(this.inquire),this.$refs.pickerCustom2.setData(this.NPClist),this.$refs.pickerCustom3.setData(this.Maplist),this.$refs.pickerCustom4.setData(this.Categorylist)},setPickerDatac2:function(){this.$refs.pickerCustom1.setData(this.inquire),this.$refs.pickerCustom2.setData(this.NPClist),this.$refs.pickerCustom3.setData(this.Maplist),this.$refs.pickerCustom4.setData(this.Categorylist)}},mounted:function(){},onShow:function(){},onLoad:function(o){var s=a.getStorageSync("workinfo");if(this.workinfo=s,o.goodinfo){this.updateview=!1,this.operation="change";var e=JSON.parse(o.goodinfo);console.log(t(e,"接收的数据"," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:478"));var n=[];for(var r in e.goodsInstanceAttrVos)null===e.goodsInstanceAttrVos[r].nickname&&(e.goodsInstanceAttrVos[r].nickname=""),r>2&&n.push(e.goodsInstanceAttrVos[r]);if(this.othergoodsInstanceAttrVos=n,this.postdata=e,""!==this.postdata.goodsInstanceAttrVos[0].value){var i=this.postdata.goodsInstanceAttrVos[0].value;"是"===i?this.postdata.goodsInstanceAttrVos[0].value={data:["是"],value:[0]}:"否"===i&&(this.postdata.goodsInstanceAttrVos[0].value={data:["否"],value:[1]})}console.log(t(this.postdata,"形成的数据"," at pages\\workpage\\goods\\categoryGoods\\categoryGoods.vue:504")),this.initialize1()}else this.operation="push",this.getCategorylist(),this.getmaplist(),this.getNPClist()}};o.default=s}).call(this,a("0de9")["default"],a("6e42")["default"])}},[["9ea7","common/runtime","common/vendor"]]]);