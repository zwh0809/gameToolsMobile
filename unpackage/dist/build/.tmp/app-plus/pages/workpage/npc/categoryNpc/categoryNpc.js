(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/workpage/npc/categoryNpc/categoryNpc"],{"0197":function(t,a,s){"use strict";var e=s("7c6c"),o=s.n(e);o.a},"5e62":function(t,a,s){"use strict";(function(t,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var e={data:function(){return{postdata:{npcClassAttrVos:[{name:"跟随玩家",value:"",nickname:"",isBase:!0},{name:"可被询问",value:"",nickname:"",isBase:!0},{name:"所在地点",value:"",nickname:"",isBase:!0},{name:"能否说话",value:"",nickname:"",isBase:!0}],id:"",name:"",intro:"",projectId:""},NPClist:[],Maplist:[],allNPClist:[],allMaplist:[],steps1:{step_1_value:"name"},inquire:[["是","否"]],inquire2:[["是","否"]],inquire3:[["能","否"]],addotherpropertylist:[],workinfo:{},operation:"push",pickerValue1:"",pickerValue2:"",updateview:!0}},methods:{deepCopy:function(t){var a=Array.isArray(t)?[]:{};for(var s in t)t.hasOwnProperty(s)&&("object"===typeof t[s]&&null!==t[s]?a[s]=this.deepCopy(t[s]):a[s]=t[s]);return a},demo:function(t){},submitdata:function(){var a=JSON.parse(JSON.stringify(this.postdata));if(console.log(t(this.operation,"状态"," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:127")),"push"===this.operation){for(var e in a.npcClassAttrVos)""===a.npcClassAttrVos[e].nickname&&(a.npcClassAttrVos[e].nickname=null);if(a.npcClassAttrVos=a.npcClassAttrVos.concat(this.addotherpropertylist),""!==a.npcClassAttrVos[0].value){console.log(t("发生了"," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:136"));var o=a.npcClassAttrVos[0].value.data[0];"否"===o?a.npcClassAttrVos[0].value="否":"是"===o&&(a.npcClassAttrVos[0].value="是")}if(""!==a.npcClassAttrVos[1].value){var n=a.npcClassAttrVos[1].value.data[0];"否"===n?a.npcClassAttrVos[1].value="否":"是"===n&&(a.npcClassAttrVos[1].value="是")}if(""!==a.npcClassAttrVos[2].value){var c=a.npcClassAttrVos[2].value.data[0];for(var e in this.allMaplist)this.allMaplist[e].name===c&&(a.npcClassAttrVos[2].value=this.allMaplist[e].id)}if(""!==a.npcClassAttrVos[3].value){console.log(t("发生了"," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:163"));var r=a.npcClassAttrVos[3].value.data[0];"否"===r?a.npcClassAttrVos[3].value="否":"能"===r&&(a.npcClassAttrVos[3].value="能")}if(!a.name)return void s.showToast({icon:"none",title:"分类名称不能为空"});if(!a.npcClassAttrVos[0].value)return void s.showToast({icon:"none",title:"请选择是否可跟随玩家"});if(!a.npcClassAttrVos[1].value)return void s.showToast({icon:"none",title:"请选择可被询问"});if(!a.npcClassAttrVos[2].value)return void s.showToast({icon:"none",title:"请选择所在地点"});if(!a.npcClassAttrVos[3].value)return void s.showToast({icon:"none",title:"能否说话"});a.projectId=this.workinfo.id,console.log(t(a,"提交的数据"," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:212"));var i=this;i.$request.post("/npc/class/",a).then(function(a){console.log(t(a," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:217")),1===a.code?s.showModal({title:"提示",content:"添加类别成功",cancelText:"继续添加",confirmText:"返回列表",success:function(a){a.confirm?(console.log(t("点击确定"," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:226")),s.navigateBack({delta:1})):a.cancel}}):s.showModal({title:"提示",content:a.msg,cancelText:"继续添加",confirmText:"返回列表",success:function(a){a.confirm?(console.log(t("点击确定"," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:242")),s.navigateBack({delta:1})):a.cancel}})}).catch(function(a){console.log(t(a," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:253"))})}else if("change"===this.operation){for(var e in a.npcClassAttrVos)""===a.npcClassAttrVos[e].nickname&&(a.npcClassAttrVos[e].nickname=null);if(a.npcClassAttrVos=a.npcClassAttrVos.concat(this.addotherpropertylist),""!==a.npcClassAttrVos[0].value){var l=a.npcClassAttrVos[0].value.data[0];"否"===l?a.npcClassAttrVos[0].value="否":"是"===l&&(a.npcClassAttrVos[0].value="是")}if(""!==a.npcClassAttrVos[1].value){var p=a.npcClassAttrVos[1].value.data[0];"否"===p?a.npcClassAttrVos[1].value="否":"是"===p&&(a.npcClassAttrVos[1].value="是")}if(""!==a.npcClassAttrVos[2].value){var u=a.npcClassAttrVos[2].value.data[0];for(var e in this.allMaplist)this.allMaplist[e].name===u&&(a.npcClassAttrVos[2].value=this.allMaplist[e].id)}if(""!==a.npcClassAttrVos[3].value){var v=a.npcClassAttrVos[3].value.data[0];"能"===v?a.npcClassAttrVos[3].value="能":"否"===v&&(a.npcClassAttrVos[3].value="否")}if(!a.name)return void s.showToast({icon:"none",title:"分类名称不能为空"});if(!a.npcClassAttrVos[0].value)return void s.showToast({icon:"none",title:"请选择是否可跟随玩家"});if(!a.npcClassAttrVos[1].value)return void s.showToast({icon:"none",title:"请选择可被询问"});if(!a.npcClassAttrVos[2].value)return void s.showToast({icon:"none",title:"请选择所在地点"});if(!a.npcClassAttrVos[3].value)return void s.showToast({icon:"none",title:"能否说话"});console.log(t(a,"编辑提交的数据"," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:338")),a.projectId=this.workinfo.id;var d=this;d.$request.put("/npc/class//"+a.id+"/",a).then(function(a){console.log(t(a," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:344")),1===a.code?s.showModal({title:"提示",content:"编辑类别成功",cancelText:"继续编辑",confirmText:"返回列表",success:function(a){a.confirm?(console.log(t("点击确定"," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:353")),s.navigateBack({delta:1})):a.cancel}}):s.showModal({title:"提示",content:a.msg,cancelText:"继续编辑",confirmText:"返回列表",success:function(a){a.confirm?(console.log(t("点击确定"," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:369")),s.navigateBack({delta:1})):a.cancel}})}).catch(function(a){console.log(t(a," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:380"))})}},deleteohter:function(t){var a=this.addotherpropertylist.indexOf(t);-1!==a&&this.addotherpropertylist.splice(a,1)},addotherproperty:function(){var t={name:"",value:"",nickname:"",isBase:!0};this.addotherpropertylist.push(t)},getmaplist:function(){var a=this;a.$request.get("/place/?projectId="+a.workinfo.id).then(function(t){var s=[[]];for(var e in t.data)s[0].push(t.data[e].name);a.allMaplist=t.data,a.Maplist=s,a.setPickerDatac()}).catch(function(a){console.error(t("error:",a," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:413"))})},initialize1:function(){var a=this;a.$request.get("/place/?projectId="+a.workinfo.id).then(function(s){var e=[[]];for(var o in s.data)e[0].push(s.data[o].name);if(a.allMaplist=s.data,a.Maplist=e,""!==a.postdata.npcClassAttrVos[2].value){var n=a.postdata.npcClassAttrVos[2].value;for(var o in a.allMaplist)a.allMaplist[o].id===parseInt(n)&&(a.postdata.npcClassAttrVos[2].value={data:[a.allMaplist[o].name],value:[parseInt(o)]},a.$set(a.postdata.npcClassAttrVos,2,a.postdata.npcClassAttrVos[2]))}a.updateview=!0,console.log(t(a.updateview,"此时的updateview"," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:443")),a.$nextTick(function(){a.setPickerDatac2()})}).catch(function(a){console.error(t("error:",a," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:449"))})},setPickerDatac:function(){this.$refs.pickerCustom1.setData(this.inquire),this.$refs.pickerCustom2.setData(this.inquire2),this.$refs.pickerCustom3.setData(this.Maplist),this.$refs.pickerCustom4.setData(this.inquire3)},setPickerDatac2:function(){this.$refs.pickerCustom1.setData(this.inquire),this.$refs.pickerCustom2.setData(this.inquire2),this.$refs.pickerCustom3.setData(this.Maplist),this.$refs.pickerCustom4.setData(this.inquire3)}},mounted:function(){},onShow:function(){},onLoad:function(a){var e=s.getStorageSync("workinfo");if(this.workinfo=e,a.categoryNpc){this.operation="change",this.updateview=!1,this.initialize1();var o=JSON.parse(a.categoryNpc);console.log(t(o,"接收的数据"," at pages\\workpage\\npc\\categoryNpc\\categoryNpc.vue:478"));var n=[];for(var c in o.npcClassAttrVos)null===o.npcClassAttrVos[c].nickname&&(o.npcClassAttrVos[c].nickname=""),c>3&&n.push(o.npcClassAttrVos[c]);if(this.addotherpropertylist=n,this.postdata=o,""!==this.postdata.npcClassAttrVos[0].value){var r=this.postdata.npcClassAttrVos[0].value;"是"===r?this.postdata.npcClassAttrVos[0].value={data:["是"],value:[0]}:"否"===r&&(this.postdata.npcClassAttrVos[0].value={data:["否"],value:[1]})}if(""!==this.postdata.npcClassAttrVos[1].value){var i=this.postdata.npcClassAttrVos[1].value;"是"===i?this.postdata.npcClassAttrVos[1].value={data:["是"],value:[0]}:"否"===i&&(this.postdata.npcClassAttrVos[1].value={data:["否"],value:[1]})}if(""!==this.postdata.npcClassAttrVos[3].value){var l=this.postdata.npcClassAttrVos[3].value;"能"===l?this.postdata.npcClassAttrVos[3].value={data:["能"],value:[0]}:"否"===l&&(this.postdata.npcClassAttrVos[3].value={data:["否"],value:[1]})}}else this.updateview=!0,this.operation="push",this.pickerValue1="请选择",this.pickerValue2="请选择",this.getmaplist()}};a.default=e}).call(this,s("0de9")["default"],s("6e42")["default"])},"7c6c":function(t,a,s){},"9aa9":function(t,a,s){"use strict";s.r(a);var e=s("5e62"),o=s.n(e);for(var n in e)"default"!==n&&function(t){s.d(a,t,function(){return e[t]})}(n);a["default"]=o.a},dfa5:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement;t._self._c},o=[];s.d(a,"a",function(){return e}),s.d(a,"b",function(){return o})},f482:function(t,a,s){"use strict";s.r(a);var e=s("dfa5"),o=s("9aa9");for(var n in o)"default"!==n&&function(t){s.d(a,t,function(){return o[t]})}(n);s("0197");var c=s("2877"),r=Object(c["a"])(o["default"],e["a"],e["b"],!1,null,null,null);a["default"]=r.exports},f5aa:function(t,a,s){"use strict";(function(t){s("bf90"),s("921b");e(s("66fd"));var a=e(s("f482"));function e(t){return t&&t.__esModule?t:{default:t}}t(a.default)}).call(this,s("6e42")["createPage"])}},[["f5aa","common/runtime","common/vendor"]]]);